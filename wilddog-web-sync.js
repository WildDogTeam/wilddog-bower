(function(){var define=null;!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.eio=e()}}(function(){var e;return function t(e,r,n){function o(i,a){if(!r[i]){if(!e[i]){var c="function"==typeof require&&require;if(!a&&c)return c(i,!0);if(s)return s(i,!0);var p=new Error("Cannot find module '"+i+"'");throw p.code="MODULE_NOT_FOUND",p}var u=r[i]={exports:{}};e[i][0].call(u.exports,function(t){var r=e[i][1][t];return o(r?r:t)},u,u.exports,t,e,r,n)}return r[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t,r){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,r){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":3,"engine.io-parser":20}],3:[function(e,t,r){(function(r){function n(e,t){if(!(this instanceof n))return new n(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=u(e),t.hostname=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=u(t.host).host),this.secure=null!=t.secure?t.secure:r.location&&"https:"==location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(r.location?location.hostname:"localhost"),this.port=t.port||(r.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized;var o="object"==typeof r&&r;o.global===o&&t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),this.open()}function o(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var s=e("./transports"),i=e("component-emitter"),a=e("debug")("engine.io-client:socket"),c=e("indexof"),p=e("engine.io-parser"),u=e("parseuri"),h=e("parsejson"),f=e("parseqs");t.exports=n,n.priorWebsocketSuccess=!1,i(n.prototype),n.protocol=p.protocol,n.Socket=n,n.Transport=e("./transport"),n.transports=e("./transports"),n.parser=e("engine.io-parser"),n.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=o(this.query);t.EIO=p.protocol,t.transport=e,this.id&&(t.sid=this.id);var r=new s[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return r},n.prototype.open=function(){var e;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1)e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(r){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},n.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},n.prototype.probe=function(e){function t(){if(f.onlyBinaryUpgrades){var t=!this.supportsBinary&&f.transport.supportsBinary;h=h||t}h||(a('probe transport "%s" opened',e),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(t){if(!h)if("pong"==t.type&&"probe"==t.data){if(a('probe transport "%s" pong',e),f.upgrading=!0,f.emit("upgrading",u),!u)return;n.priorWebsocketSuccess="websocket"==u.name,a('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){h||"closed"!=f.readyState&&(a("changing transport and sending upgrade packet"),p(),f.setTransport(u),u.send([{type:"upgrade"}]),f.emit("upgrade",u),u=null,f.upgrading=!1,f.flush())})}else{a('probe transport "%s" failed',e);var r=new Error("probe error");r.transport=u.name,f.emit("upgradeError",r)}}))}function r(){h||(h=!0,p(),u.close(),u=null)}function o(t){var n=new Error("probe error: "+t);n.transport=u.name,r(),a('probe transport "%s" failed because of error: %s',e,t),f.emit("upgradeError",n)}function s(){o("transport closed")}function i(){o("socket closed")}function c(e){u&&e.name!=u.name&&(a('"%s" works - aborting "%s"',e.name,u.name),r())}function p(){u.removeListener("open",t),u.removeListener("error",o),u.removeListener("close",s),f.removeListener("close",i),f.removeListener("upgrading",c)}a('probing transport "%s"',e);var u=this.createTransport(e,{probe:1}),h=!1,f=this;n.priorWebsocketSuccess=!1,u.once("open",t),u.once("error",o),u.once("close",s),this.once("close",i),this.once("upgrading",c),u.open()},n.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},n.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(h(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},n.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},n.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},n.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this},n.prototype.sendPacket=function(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"!=this.readyState&&"closed"!=this.readyState){r=r||{},r.compress=!1!==r.compress;var o={type:e,data:t,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},n.prototype.close=function(){function e(){n.onClose("forced close"),a("socket closing - telling transport to close"),n.transport.close()}function t(){n.removeListener("upgrade",t),n.removeListener("upgradeError",t),e()}function r(){n.once("upgrade",t),n.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():e()}):this.upgrading?r():e()}return this},n.prototype.onError=function(e){a("socket error %j",e),n.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},n.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){a('socket close with reason: "%s"',e);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),r.writeBuffer=[],r.prevBufferLen=0}},n.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;r<n;r++)~c(this.transports,e[r])&&t.push(e[r]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./transport":4,"./transports":5,"component-emitter":16,debug:18,"engine.io-parser":20,indexof:24,parsejson:27,parseqs:28,parseuri:29}],4:[function(e,t,r){function n(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders}var o=e("engine.io-parser"),s=e("component-emitter");t.exports=n,s(n.prototype),n.prototype.onError=function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this},n.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},n.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(e){var t=o.decodePacket(e,this.socket.binaryType);this.onPacket(t)},n.prototype.onPacket=function(e){this.emit("packet",e)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":16,"engine.io-parser":20}],5:[function(e,t,r){(function(t){function n(e){var r,n=!1,a=!1,c=!1!==e.jsonp;if(t.location){var p="https:"==location.protocol,u=location.port;u||(u=p?443:80),n=e.hostname!=location.hostname||u!=e.port,a=e.secure!=p}if(e.xdomain=n,e.xscheme=a,r=new o(e),"open"in r&&!e.forceJSONP)return new s(e);if(!c)throw new Error("JSONP disabled");return new i(e)}var o=e("xmlhttprequest-ssl"),s=e("./polling-xhr"),i=e("./polling-jsonp"),a=e("./websocket");r.polling=n,r.websocket=a}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(e,t,r){(function(r){function n(){}function o(e){s.call(this,e),this.query=this.query||{},a||(r.___eio||(r.___eio=[]),a=r.___eio),this.index=a.length;var t=this;a.push(function(e){t.onData(e)}),this.query.j=this.index,r.document&&r.addEventListener&&r.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=n)},!1)}var s=e("./polling"),i=e("component-inherit");t.exports=o;var a,c=/\n/g,p=/\\n/g;i(o,s),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),s.prototype.doClose.call(this)},o.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t;var n="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},o.prototype.doWrite=function(e,t){function r(){n(),t()}function n(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';s=document.createElement(t)}catch(e){s=document.createElement("iframe"),s.name=o.iframeId,s.src="javascript:0"}s.id=o.iframeId,o.form.appendChild(s),o.iframe=s}var o=this;if(!this.form){var s,i=document.createElement("form"),a=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=u,i.method="POST",i.setAttribute("accept-charset","utf-8"),a.name="d",i.appendChild(a),document.body.appendChild(i),this.form=i,this.area=a}this.form.action=this.uri(),n(),e=e.replace(p,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(h){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==o.iframe.readyState&&r()}:this.iframe.onload=r}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling":8,"component-inherit":17}],7:[function(e,t,r){(function(r){function n(){}function o(e){if(c.call(this,e),r.location){var t="https:"==location.protocol,n=location.port;n||(n=t?443:80),this.xd=e.hostname!=r.location.hostname||n!=e.port,this.xs=e.secure!=t}else this.extraHeaders=e.extraHeaders}function s(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function i(){for(var e in s.requests)s.requests.hasOwnProperty(e)&&s.requests[e].abort()}var a=e("xmlhttprequest-ssl"),c=e("./polling"),p=e("component-emitter"),u=e("component-inherit"),h=e("debug")("engine.io-client:polling-xhr");t.exports=o,t.exports.Request=s,u(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.extraHeaders=this.extraHeaders,new s(e)},o.prototype.doWrite=function(e,t){var r="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:r}),o=this;n.on("success",t),n.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=n},o.prototype.doPoll=function(){h("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},p(s.prototype),s.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new a(e),n=this;try{h("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&t.setRequestHeader(o,this.extraHeaders[o])}}catch(i){}if(this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?n.onLoad():setTimeout(function(){n.onError(t.status)},0))},h("xhr data %s",this.data),t.send(this.data)}catch(i){return void setTimeout(function(){n.onError(i)},0)}r.document&&(this.index=s.requestsCount++,s.requests[this.index]=this)},s.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},s.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},s.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},s.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,e)try{this.xhr.abort()}catch(t){}r.document&&delete s.requests[this.index],this.xhr=null}},s.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(r){}if("application/octet-stream"===t)e=this.xhr.response;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(r){for(var n=new Uint8Array(this.xhr.response),o=[],s=0,i=n.length;s<i;s++)o.push(n[s]);e=String.fromCharCode.apply(null,o)}else e=this.xhr.responseText}catch(r){this.onError(r)}null!=e&&this.onData(e)},s.prototype.hasXDR=function(){return"undefined"!=typeof r.XDomainRequest&&!this.xs&&this.enablesXDR},s.prototype.abort=function(){this.cleanup()},r.document&&(s.requestsCount=0,s.requests={},r.attachEvent?r.attachEvent("onunload",i):r.addEventListener&&r.addEventListener("beforeunload",i,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling":8,"component-emitter":16,"component-inherit":17,debug:18,"xmlhttprequest-ssl":10}],8:[function(e,t,r){function n(e){var t=e&&e.forceBase64;u&&!t||(this.supportsBinary=!1),o.call(this,e)}var o=e("../transport"),s=e("parseqs"),i=e("engine.io-parser"),a=e("component-inherit"),c=e("yeast"),p=e("debug")("engine.io-client:polling");t.exports=n;var u=function(){var t=e("xmlhttprequest-ssl"),r=new t({xdomain:!1});return null!=r.responseType}();a(n,o),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(e){function t(){p("paused"),r.readyState="paused",e()}var r=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(p("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){p("pre-pause polling complete"),--n||t()})),this.writable||(p("we are currently writing - waiting to pause"),n++,this.once("drain",function(){p("pre-pause writing complete"),--n||t()}))}else t()},n.prototype.poll=function(){p("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(e){var t=this;p("polling got data %s",e);var r=function(e,r,n){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};i.decodePayload(e,this.socket.binaryType,r),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():p('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function e(){p("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(p("transport open - closing"),e()):(p("transport not open - deferring close"),this.once("open",e))},n.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")},t=this;i.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,r)})},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";!1!==this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||e.sid||(e.b64=1),e=s.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(r=":"+this.port),e.length&&(e="?"+e);var n=this.hostname.indexOf(":")!==-1;return t+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+e}},{"../transport":4,"component-inherit":17,debug:18,"engine.io-parser":20,parseqs:28,"xmlhttprequest-ssl":10,yeast:31}],9:[function(e,t,r){(function(r){function n(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,o.call(this,e)}var o=e("../transport"),s=e("engine.io-parser"),i=e("parseqs"),a=e("component-inherit"),c=e("yeast"),p=e("debug")("engine.io-client:websocket"),u=r.WebSocket||r.MozWebSocket,h=u;if(!h&&"undefined"==typeof window)try{h=e("ws")}catch(f){}t.exports=n,a(n,o),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.ws=u?new h(e):new h(e,t,r),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(n.prototype.onData=function(e){var t=this;setTimeout(function(){o.prototype.onData.call(t,e)},0)}),n.prototype.write=function(e){function t(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}var n=this;this.writable=!1;for(var o=e.length,i=0,a=o;i<a;i++)!function(e){s.encodePacket(e,n.supportsBinary,function(s){if(!u){var i={};if(e.options&&(i.compress=e.options.compress),n.perMessageDeflate){var a="string"==typeof s?r.Buffer.byteLength(s):s.length;a<n.perMessageDeflate.threshold&&(i.compress=!1)}}try{u?n.ws.send(s):n.ws.send(s,i)}catch(c){p("websocket closed before onclose event")}--o||t()})}(e[i])},n.prototype.onClose=function(){o.prototype.onClose.call(this)},n.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||(e.b64=1),e=i.encode(e),e.length&&(e="?"+e);var n=this.hostname.indexOf(":")!==-1;return t+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+e},n.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===n.prototype.name)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"../transport":4,"component-inherit":17,debug:18,"engine.io-parser":20,parseqs:28,ws:15,yeast:31}],10:[function(e,t,r){var n=e("has-cors");t.exports=function(e){var t=e.xdomain,r=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(s){}try{if("undefined"!=typeof XDomainRequest&&!r&&o)return new XDomainRequest}catch(s){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(s){}}},{"has-cors":23}],11:[function(e,t,r){function n(e,t,r){function n(e,o){if(n.count<=0)throw new Error("after called too many times");--n.count,e?(s=!0,t(e),t=r):0!==n.count||s||t(null,o)}var s=!1;return r=r||o,n.count=e,0===e?t():n}function o(){}t.exports=n},{}],12:[function(e,t,r){t.exports=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(t<0&&(t+=n),r<0&&(r+=n),r>n&&(r=n),t>=n||t>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(e),s=new Uint8Array(r-t),i=t,a=0;i<r;i++,a++)s[a]=o[i];return s.buffer}},{}],13:[function(e,t,r){!function(e){"use strict";r.encode=function(t){var r,n=new Uint8Array(t),o=n.length,s="";for(r=0;r<o;r+=3)s+=e[n[r]>>2],s+=e[(3&n[r])<<4|n[r+1]>>4],s+=e[(15&n[r+1])<<2|n[r+2]>>6],s+=e[63&n[r+2]];return o%3===2?s=s.substring(0,s.length-1)+"=":o%3===1&&(s=s.substring(0,s.length-2)+"=="),s},r.decode=function(t){var r,n,o,s,i,a=.75*t.length,c=t.length,p=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),h=new Uint8Array(u);for(r=0;r<c;r+=4)n=e.indexOf(t[r]),o=e.indexOf(t[r+1]),s=e.indexOf(t[r+2]),i=e.indexOf(t[r+3]),h[p++]=n<<2|o>>4,h[p++]=(15&o)<<4|s>>2,h[p++]=(3&s)<<6|63&i;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(e,t,r){(function(e){function r(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var o=new Uint8Array(r.byteLength);o.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=o.buffer}e[t]=n}}}function n(e,t){t=t||{};var n=new s;r(e);for(var o=0;o<e.length;o++)n.append(e[o]);return t.type?n.getBlob(t.type):n.getBlob()}function o(e,t){return r(e),new Blob(e,t||{})}var s=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,i=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(t){return!1}}(),a=i&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(t){return!1}}(),c=s&&s.prototype.append&&s.prototype.getBlob;t.exports=function(){return i?a?e.Blob:o:c?n:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],15:[function(e,t,r){},{}],16:[function(e,t,r){function n(e){if(e)return o(e)}function o(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===t||n.fn===t){r.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],17:[function(e,t,r){t.exports=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],18:[function(e,t,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!t)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,s=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(s=o))}),e.splice(s,0,n),e}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(t){}}function a(){var e;try{e=r.storage.debug}catch(t){}return e}function c(){try{return window.localStorage}catch(e){}}r=t.exports=e("./debug"),r.log=s,r.formatArgs=o,r.save=i,r.load=a,r.useColors=n,r.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){return JSON.stringify(e)},r.enable(a())},{"./debug":19}],19:[function(e,t,r){function n(){return r.colors[u++%r.colors.length]}function o(e){function t(){}function o(){var e=o,t=+new Date,s=t-(p||t);e.diff=s,e.prev=p,e.curr=t,p=t,null==e.useColors&&(e.useColors=r.useColors()),null==e.color&&e.useColors&&(e.color=n());var i=Array.prototype.slice.call(arguments);i[0]=r.coerce(i[0]),"string"!=typeof i[0]&&(i=["%o"].concat(i));var a=0;i[0]=i[0].replace(/%([a-z%])/g,function(t,n){if("%%"===t)return t;a++;var o=r.formatters[n];if("function"==typeof o){var s=i[a];t=o.call(e,s),i.splice(a,1),a--}return t}),"function"==typeof r.formatArgs&&(i=r.formatArgs.apply(e,i));var c=o.log||r.log||console.log.bind(console);c.apply(e,i)}t.enabled=!1,o.enabled=!0;var s=r.enabled(e)?o:t;return s.namespace=e,s}function s(e){r.save(e);for(var t=(e||"").split(/[\s,]+/),n=t.length,o=0;o<n;o++)t[o]&&(e=t[o].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))}function i(){r.enable("")}function a(e){var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}r=t.exports=o,r.coerce=c,r.disable=i,r.enable=s,r.enabled=a,r.humanize=e("ms"),r.names=[],r.skips=[],r.formatters={};var p,u=0},{ms:26}],20:[function(e,t,r){(function(t){function n(e,t){var n="b"+r.packets[e.type]+e.data.data;return t(n)}function o(e,t,n){if(!t)return r.encodeBase64Packet(e,n);var o=e.data,s=new Uint8Array(o),i=new Uint8Array(1+o.byteLength);i[0]=m[e.type];for(var a=0;a<s.length;a++)i[a+1]=s[a];return n(i.buffer)}function s(e,t,n){if(!t)return r.encodeBase64Packet(e,n);var o=new FileReader;return o.onload=function(){e.data=o.result,r.encodePacket(e,t,!0,n)},o.readAsArrayBuffer(e.data)}function i(e,t,n){if(!t)return r.encodeBase64Packet(e,n);if(g)return s(e,t,n);var o=new Uint8Array(1);o[0]=m[e.type];var i=new w([o.buffer,e.data]);return n(i)}function a(e,t,r){for(var n=new Array(e.length),o=f(e.length,r),s=function(e,r,o){t(r,function(t,r){n[e]=r,o(t,n)})},i=0;i<e.length;i++)s(i,e[i],o)}var c=e("./keys"),p=e("has-binary"),u=e("arraybuffer.slice"),h=e("base64-arraybuffer"),f=e("after"),l=e("utf8"),d=navigator.userAgent.match(/Android/i),y=/PhantomJS/i.test(navigator.userAgent),g=d||y;r.protocol=3;var m=r.packets={
open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},v=c(m),b={type:"error",data:"parser error"},w=e("blob");r.encodePacket=function(e,r,s,a){"function"==typeof r&&(a=r,r=!1),"function"==typeof s&&(a=s,s=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return o(e,r,a);if(w&&c instanceof t.Blob)return i(e,r,a);if(c&&c.base64)return n(e,a);var p=m[e.type];return void 0!==e.data&&(p+=s?l.encode(String(e.data)):String(e.data)),a(""+p)},r.encodeBase64Packet=function(e,n){var o="b"+r.packets[e.type];if(w&&e.data instanceof t.Blob){var s=new FileReader;return s.onload=function(){var e=s.result.split(",")[1];n(o+e)},s.readAsDataURL(e.data)}var i;try{i=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(a){for(var c=new Uint8Array(e.data),p=new Array(c.length),u=0;u<c.length;u++)p[u]=c[u];i=String.fromCharCode.apply(null,p)}return o+=t.btoa(i),n(o)},r.decodePacket=function(e,t,n){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return r.decodeBase64Packet(e.substr(1),t);if(n)try{e=l.decode(e)}catch(o){return b}var s=e.charAt(0);return Number(s)==s&&v[s]?e.length>1?{type:v[s],data:e.substring(1)}:{type:v[s]}:b}var i=new Uint8Array(e),s=i[0],a=u(e,1);return w&&"blob"===t&&(a=new w([a])),{type:v[s],data:a}},r.decodeBase64Packet=function(e,r){var n=v[e.charAt(0)];if(!t.ArrayBuffer)return{type:n,data:{base64:!0,data:e.substr(1)}};var o=h.decode(e.substr(1));return"blob"===r&&w&&(o=new w([o])),{type:n,data:o}},r.encodePayload=function(e,t,n){function o(e){return e.length+":"+e}function s(e,n){r.encodePacket(e,!!i&&t,!0,function(e){n(null,o(e))})}"function"==typeof t&&(n=t,t=null);var i=p(e);return t&&i?w&&!g?r.encodePayloadAsBlob(e,n):r.encodePayloadAsArrayBuffer(e,n):e.length?void a(e,s,function(e,t){return n(t.join(""))}):n("0:")},r.decodePayload=function(e,t,n){if("string"!=typeof e)return r.decodePayloadAsBinary(e,t,n);"function"==typeof t&&(n=t,t=null);var o;if(""==e)return n(b,0,1);for(var s,i,a="",c=0,p=e.length;c<p;c++){var u=e.charAt(c);if(":"!=u)a+=u;else{if(""==a||a!=(s=Number(a)))return n(b,0,1);if(i=e.substr(c+1,s),a!=i.length)return n(b,0,1);if(i.length){if(o=r.decodePacket(i,t,!0),b.type==o.type&&b.data==o.data)return n(b,0,1);var h=n(o,c+s,p);if(!1===h)return}c+=s,a=""}}return""!=a?n(b,0,1):void 0},r.encodePayloadAsArrayBuffer=function(e,t){function n(e,t){r.encodePacket(e,!0,!0,function(e){return t(null,e)})}return e.length?void a(e,n,function(e,r){var n=r.reduce(function(e,t){var r;return r="string"==typeof t?t.length:t.byteLength,e+r.toString().length+r+2},0),o=new Uint8Array(n),s=0;return r.forEach(function(e){var t="string"==typeof e,r=e;if(t){for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);r=n.buffer}t?o[s++]=0:o[s++]=1;for(var a=r.byteLength.toString(),i=0;i<a.length;i++)o[s++]=parseInt(a[i]);o[s++]=255;for(var n=new Uint8Array(r),i=0;i<n.length;i++)o[s++]=n[i]}),t(o.buffer)}):t(new ArrayBuffer(0))},r.encodePayloadAsBlob=function(e,t){function n(e,t){r.encodePacket(e,!0,!0,function(e){var r=new Uint8Array(1);if(r[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);e=n.buffer,r[0]=0}for(var s=e instanceof ArrayBuffer?e.byteLength:e.size,i=s.toString(),a=new Uint8Array(i.length+1),o=0;o<i.length;o++)a[o]=parseInt(i[o]);if(a[i.length]=255,w){var c=new w([r.buffer,a.buffer,e]);t(null,c)}})}a(e,n,function(e,r){return t(new w(r))})},r.decodePayloadAsBinary=function(e,t,n){"function"==typeof t&&(n=t,t=null);for(var o=e,s=[],i=!1;o.byteLength>0;){for(var a=new Uint8Array(o),c=0===a[0],p="",h=1;255!=a[h];h++){if(p.length>310){i=!0;break}p+=a[h]}if(i)return n(b,0,1);o=u(o,2+p.length),p=parseInt(p);var f=u(o,0,p);if(c)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(l){var d=new Uint8Array(f);f="";for(var h=0;h<d.length;h++)f+=String.fromCharCode(d[h])}s.push(f),o=u(o,p)}var y=s.length;s.forEach(function(e,o){n(r.decodePacket(e,t,!0),o,y)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./keys":21,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":22,utf8:30}],21:[function(e,t,r){t.exports=Object.keys||function(e){var t=[],r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&t.push(n);return t}},{}],22:[function(e,t,r){(function(r){function n(e){function t(e){if(!e)return!1;if(r.Buffer&&r.Buffer.isBuffer(e)||r.ArrayBuffer&&e instanceof ArrayBuffer||r.Blob&&e instanceof Blob||r.File&&e instanceof File)return!0;if(o(e)){for(var n=0;n<e.length;n++)if(t(e[n]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return!0}return!1}return t(e)}var o=e("isarray");t.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{isarray:25}],23:[function(e,t,r){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){t.exports=!1}},{}],24:[function(e,t,r){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},{}],25:[function(e,t,r){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],26:[function(e,t,r){function n(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*h;case"days":case"day":case"d":return r*u;case"hours":case"hour":case"hrs":case"hr":case"h":return r*p;case"minutes":case"minute":case"mins":case"min":case"m":return r*c;case"seconds":case"second":case"secs":case"sec":case"s":return r*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function o(e){return e>=u?Math.round(e/u)+"d":e>=p?Math.round(e/p)+"h":e>=c?Math.round(e/c)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function s(e){return i(e,u,"day")||i(e,p,"hour")||i(e,c,"minute")||i(e,a,"second")||e+" ms"}function i(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var a=1e3,c=60*a,p=60*c,u=24*p,h=365.25*u;t.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t["long"]?s(e):o(e)}},{}],27:[function(e,t,r){(function(e){var r=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,s=/(?:^|:|,)(?:\s*\[)+/g,i=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(i,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):r.test(t.replace(n,"@").replace(o,"]").replace(s,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],28:[function(e,t,r){r.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},r.decode=function(e){for(var t={},r=e.split("&"),n=0,o=r.length;n<o;n++){var s=r[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}},{}],29:[function(e,t,r){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,r=e.indexOf("["),s=e.indexOf("]");r!=-1&&s!=-1&&(e=e.substring(0,r)+e.substring(r,s).replace(/:/g,";")+e.substring(s,e.length));for(var i=n.exec(e||""),a={},c=14;c--;)a[o[c]]=i[c]||"";return r!=-1&&s!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},{}],30:[function(t,r,n){(function(t){!function(o){function s(e){for(var t,r,n=[],o=0,s=e.length;o<s;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<s?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function i(e){for(var t,r=e.length,n=-1,o="";++n<r;)t=e[n],t>65535&&(t-=65536,o+=w(t>>>10&1023|55296),t=56320|1023&t),o+=w(t);return o}function a(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function c(e,t){return w(e>>t&63|128)}function p(e){if(0==(4294967168&e))return w(e);var t="";return 0==(4294965248&e)?t=w(e>>6&31|192):0==(4294901760&e)?(a(e),t=w(e>>12&15|224),t+=c(e,6)):0==(4292870144&e)&&(t=w(e>>18&7|240),t+=c(e,12),t+=c(e,6)),t+=w(63&e|128)}function u(e){for(var t,r=s(e),n=r.length,o=-1,i="";++o<n;)t=r[o],i+=p(t);return i}function h(){if(b>=v)throw Error("Invalid byte index");var e=255&m[b];if(b++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function f(){var e,t,r,n,o;if(b>v)throw Error("Invalid byte index");if(b==v)return!1;if(e=255&m[b],b++,0==(128&e))return e;if(192==(224&e)){var t=h();if(o=(31&e)<<6|t,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=h(),r=h(),o=(15&e)<<12|t<<6|r,o>=2048)return a(o),o;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=h(),r=h(),n=h(),o=(15&e)<<18|t<<12|r<<6|n,o>=65536&&o<=1114111))return o;throw Error("Invalid UTF-8 detected")}function l(e){m=s(e),v=m.length,b=0;for(var t,r=[];(t=f())!==!1;)r.push(t);return i(r)}var d="object"==typeof n&&n,y="object"==typeof r&&r&&r.exports==d&&r,g="object"==typeof t&&t;g.global!==g&&g.window!==g||(o=g);var m,v,b,w=String.fromCharCode,x={version:"2.0.0",encode:u,decode:l};if("function"==typeof e&&"object"==typeof e.amd&&e.amd)e(function(){return x});else if(d&&!d.nodeType)if(y)y.exports=x;else{var k={},B=k.hasOwnProperty;for(var S in x)B.call(x,S)&&(d[S]=x[S])}else o.utf8=x}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],31:[function(e,t,r){"use strict";function n(e){var t="";do t=a[e%c]+t,e=Math.floor(e/c);while(e>0);return t}function o(e){var t=0;for(h=0;h<e.length;h++)t=t*c+p[e.charAt(h)];return t}function s(){var e=n(+new Date);return e!==i?(u=0,i=e):e+"."+n(u++)}for(var i,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),c=64,p={},u=0,h=0;h<c;h++)p[a[h]]=h;s.encode=n,s.decode=o,t.exports=s},{}]},{},[1])(1)});})();
(function(ns){var CLIENT_VERSION = "2.4.1";var CLIENT_TYPE ="WEB";ns.wrapper=function(goog,wd){
var h,n=this;function p(a){return void 0!==a}function aa(){}function ba(a){a.Hb=function(){return a.ye?a.ye:a.ye=new a}}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function da(a){return"array"==ca(a)}function q(a){return"string"==typeof a}function ea(a){return"number"==typeof a}function fa(a){return"function"==ca(a)}function ga(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ha(a,b,c){return a.call.apply(a.bind,arguments)}
function ia(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function r(a,b,c){r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia;return r.apply(null,arguments)}
function ja(a,b){var c=a.split("."),d=n;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&p(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function t(a,b){function c(){}c.prototype=b.prototype;a.bg=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Xf=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function ka(a){return/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))}function la(a){a=String(a);if(ka(a))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);}function ma(){this.kd=void 0}
function na(a,b,c){if(null==b)c.push("null");else{if("object"==typeof b){if(da(b)){var d=b;b=d.length;c.push("[");for(var e="",f=0;f<b;f++)c.push(e),e=d[f],na(a,a.kd?a.kd.call(d,String(f),e):e,c),e=",";c.push("]");return}if(b instanceof String||b instanceof Number||b instanceof Boolean)b=b.valueOf();else{c.push("{");f="";for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(e=b[d],"function"!=typeof e&&(c.push(f),oa(d,c),c.push(":"),na(a,a.kd?a.kd.call(b,d,e):e,c),f=","));c.push("}");return}}switch(typeof b){case "string":oa(b,
c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?String(b):"null");break;case "boolean":c.push(String(b));break;case "function":c.push("null");break;default:throw Error("Unknown type: "+typeof b);}}}var pa={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},qa=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function oa(a,b){b.push('"',a.replace(qa,function(a){var b=pa[a];b||(b="\\u"+(a.charCodeAt(0)|65536).toString(16).substr(1),pa[a]=b);return b}),'"')};var ra={};function sa(a){return"undefined"!==typeof JSON&&p(JSON.parse)?JSON.parse(a):la(a)}function u(a){if("undefined"!==typeof JSON&&p(JSON.stringify))a=JSON.stringify(a);else{var b=[];na(new ma,a,b);a=b.join("")}return a};function ta(){this.$a=-1};function ua(){this.$a=64;this.T=[];this.Ed=[];this.bf=[];this.fd=[];this.fd[0]=128;for(var a=1;a<this.$a;++a)this.fd[a]=0;this.wd=this.Mb=0;this.reset()}t(ua,ta);ua.prototype.reset=function(){this.T[0]=1732584193;this.T[1]=4023233417;this.T[2]=2562383102;this.T[3]=271733878;this.T[4]=3285377520;this.wd=this.Mb=0};
function va(a,b,c){c||(c=0);var d=a.bf;if(q(b))for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}b=a.T[0];c=a.T[1];for(var g=a.T[2],k=a.T[3],l=a.T[4],m,e=0;80>e;e++)40>e?20>e?(f=k^c&(g^k),m=1518500249):(f=c^g^k,m=1859775393):60>e?(f=c&g|k&(c|g),m=2400959708):(f=c^g^k,m=3395469782),f=(b<<
5|b>>>27)+f+l+m+d[e]&4294967295,l=k,k=g,g=(c<<30|c>>>2)&4294967295,c=b,b=f;a.T[0]=a.T[0]+b&4294967295;a.T[1]=a.T[1]+c&4294967295;a.T[2]=a.T[2]+g&4294967295;a.T[3]=a.T[3]+k&4294967295;a.T[4]=a.T[4]+l&4294967295}
ua.prototype.update=function(a,b){if(null!=a){p(b)||(b=a.length);for(var c=b-this.$a,d=0,e=this.Ed,f=this.Mb;d<b;){if(0==f)for(;d<=c;)va(this,a,d),d+=this.$a;if(q(a))for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,f==this.$a){va(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,f==this.$a){va(this,e);f=0;break}}this.Mb=f;this.wd+=b}};
ua.prototype.digest=function(){var a=[],b=8*this.wd;56>this.Mb?this.update(this.fd,56-this.Mb):this.update(this.fd,this.$a-(this.Mb-56));for(var c=this.$a-1;56<=c;c--)this.Ed[c]=b&255,b/=256;va(this,this.Ed);for(c=b=0;5>c;c++)for(var d=24;0<=d;d-=8)a[b]=this.T[c]>>d&255,++b;return a};function wa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,wa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(wa,Error);wa.prototype.name="CustomError";var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(q(a))return q(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.filter?function(a,b,c){return Array.prototype.filter.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=q(a)?a.split(""):a,k=0;k<d;k++)if(k in g){var l=g[k];b.call(c,l,k,a)&&(e[f++]=l)}return e},Aa=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=q(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Ba=Array.prototype.reduce?function(a,b,c,d){d&&(b=r(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,g){e=b.call(d,
e,c,g,a)});return e},Ca=Array.prototype.every?function(a,b,c){return Array.prototype.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function Da(a,b){var c=Ea(a,b,void 0);return 0>c?null:q(a)?a.charAt(c):a[c]}function Ea(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Fa(a,b){var c=xa(a,b);0<=c&&Array.prototype.splice.call(a,c,1)}
function Ga(a,b){a.sort(b||Ha)}function Ha(a,b){return a>b?1:a<b?-1:0};var Ia;a:{var Ja=n.navigator;if(Ja){var Ka=Ja.userAgent;if(Ka){Ia=Ka;break a}}Ia=""};function v(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function La(a,b){var c={},d;for(d in a)c[d]=b.call(void 0,a[d],d,a);return c}function Ma(a,b){for(var c in a)if(!b.call(void 0,a[c],c,a))return!1;return!0}function Na(a){var b=0,c;for(c in a)b++;return b}function Oa(a){for(var b in a)return b}function Pa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Qa(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Ra(a,b){return null!==a&&b in a}
function Sa(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function Ta(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d}function Ua(a,b){var c=Ta(a,b,void 0);return c&&a[c]}function Va(a){for(var b in a)return!1;return!0}function Wa(a){var b={},c;for(c in a)b[c]=a[c];return b};var Xa=null,Ya=null;function Za(a){var b="";$a(a,function(a){b+=String.fromCharCode(a)});return b}function $a(a,b){function c(b){for(;d<a.length;){var c=a.charAt(d++),e=Ya[c];if(null!=e)return e;if(!/^[\s\xa0]*$/.test(c))throw Error("Unknown base64 encoding at char: "+c);}return b}ab();for(var d=0;;){var e=c(-1),f=c(0),g=c(64),k=c(64);if(64===k&&-1===e)break;b(e<<2|f>>4);64!=g&&(b(f<<4&240|g>>2),64!=k&&b(g<<6&192|k))}}
function ab(){if(!Xa){Xa={};Ya={};for(var a=0;65>a;a++)Xa[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),Ya[Xa[a]]=a,62<=a&&(Ya["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a)]=a)}};var bb=function(){var a=1;return function(){return a++}}();function x(a,b){if(!a)throw cb(b);}function cb(a){return Error("Wilddog ("+Wilddog.he+") INTERNAL ASSERT FAILED: "+a)}function db(a){try{return"NODE"==CLIENT_TYPE?(new Buffer(a,"base64")).toString("utf8"):"undefined"!==typeof atob?atob(a):Za(a)}catch(b){eb("base64Decode failed: ",b)}return null}
function fb(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);55296<=e&&56319>=e&&(e-=55296,d++,x(d<a.length,"Surrogate pair missing trail surrogate."),e=65536+(e<<10)+(a.charCodeAt(d)-56320));128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(65536>e?b[c++]=e>>12|224:(b[c++]=e>>18|240,b[c++]=e>>12&63|128),b[c++]=e>>6&63|128),b[c++]=e&63|128)}a=new ua;a.update(b);b=a.digest();ab();a=Xa;c=[];for(d=0;d<b.length;d+=3){var f=b[d],g=(e=d+1<b.length)?b[d+1]:0,k=d+2<b.length,l=k?b[d+2]:0,m=f>>2,f=(f&3)<<
4|g>>4,g=(g&15)<<2|l>>6,l=l&63;k||(l=64,e||(g=64));c.push(a[m],a[f],a[g],a[l])}return c.join("")}function gb(a){for(var b="",c=0;c<arguments.length;c++)var d=arguments[c],e=ca(d),b="array"==e||"object"==e&&"number"==typeof d.length?b+gb.apply(null,arguments[c]):"object"===typeof arguments[c]?b+u(arguments[c]):b+arguments[c],b=b+" ";return b}var hb=null,ib=!0;function eb(a){!0===ib&&(ib=!1,null===hb&&!0===jb.get("logging_enabled")&&Wilddog.oe(!0));if(hb){var b=gb.apply(null,arguments);hb(b)}}
function kb(a){return function(){eb(a,arguments)}}function lb(a){if("undefined"!==typeof console){var b="WILDDOG INTERNAL ERROR: "+gb.apply(null,arguments);"undefined"!==typeof console.error?console.error(b):console.log(b)}}function mb(a){var b=gb.apply(null,arguments);throw Error("WILDDOG FATAL ERROR: "+b);}function y(a){if("undefined"!==typeof console){var b="WILDDOG WARNING: "+gb.apply(null,arguments);"undefined"!==typeof console.warn?console.warn(b):console.log(b)}}
function nb(a){return ea(a)&&(a!=a||a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)}function ob(a,b){if(a===b)return 0;if("[MIN_NAME]"===a||"[MAX_NAME]"===b)return-1;if("[MIN_NAME]"===b||"[MAX_NAME]"===a)return 1;var c=pb(a),d=pb(b);return null!==c?null!==d?0==c-d?a.length-b.length:c-d:-1:null!==d?1:a<b?-1:1}
function qb(a){if("object"!==typeof a||null===a)return u(a);var b=[],c;for(c in a)b.push(c);b.sort();c="{";for(var d=0;d<b.length;d++)0!==d&&(c+=","),c+=u(b[d]),c+=":",c+=qb(a[b[d]]);return c+"}"}function rb(a,b){if(da(a))for(var c=0;c<a.length;++c)b(c,a[c]);else v(a,b)}
function sb(a){x(!nb(a),"Invalid JSON number");var b,c,d,e;0===a?(d=c=0,b=-Infinity===1/a?1:0):(b=0>a,a=Math.abs(a),a>=Math.pow(2,-1022)?(d=Math.min(Math.floor(Math.log(a)/Math.LN2),1023),c=d+1023,d=Math.round(a*Math.pow(2,52-d)-Math.pow(2,52))):(c=0,d=Math.round(a/Math.pow(2,-1074))));e=[];for(a=52;a;--a)e.push(d%2?1:0),d=Math.floor(d/2);for(a=11;a;--a)e.push(c%2?1:0),c=Math.floor(c/2);e.push(b?1:0);e.reverse();b=e.join("");c="";for(a=0;64>a;a+=8)d=parseInt(b.substr(a,8),2).toString(16),1===d.length&&
(d="0"+d),c+=d;return c.toLowerCase()}var tb=/^-?\d{1,10}$/;function pb(a){return tb.test(a)&&(a=Number(a),-2147483648<=a&&2147483647>=a)?a:null}function ub(a){try{a()}catch(b){setTimeout(function(){y("Exception was thrown by user callback.",b.stack||"");throw b;},Math.floor(0))}};function vb(a){x(da(a)&&0<a.length,"Requires a non-empty array");this.df=a;this.pc={}}vb.prototype.xd=function(a,b){for(var c=this.pc[a]||[],d=0;d<c.length;d++)c[d].dc.apply(c[d].context,Array.prototype.slice.call(arguments,1))};vb.prototype.rb=function(a,b,c){wb(this,a);this.pc[a]=this.pc[a]||[];this.pc[a].push({dc:b,context:c});(a=this.Nd(a))&&b.apply(c,a)};
vb.prototype.Sb=function(a,b,c){wb(this,a);a=this.pc[a]||[];for(var d=0;d<a.length;d++)if(a[d].dc===b&&(!c||c===a[d].context)){a.splice(d,1);break}};function wb(a,b){x(Da(a.df,function(a){return a===b}),"Unknown event: "+b)};function z(a,b){vb.call(this,["authStateChanged","authTokenExpired"]);this.cf={Te:!1};this.ie={};Object.defineProperty(this,"name",{value:b,writable:!1});Object.defineProperty(this,"options",{value:a,writable:!1})}t(z,vb);function xb(a,b){z.prototype[a]=function(){return b(this)}}z.prototype.nf=function(a,b){var c=!0,d;for(d in yb)if(yb.hasOwnProperty(d)&&yb[d]===a){c=!1;break}if(c)throw Error("Unknown event "+a);this.ie[a]=b;switch(a){case yb.Ec:this.cf.Te=b&&b.Te}this.xd(a,b)};
z.prototype.emit=z.prototype.nf;z.prototype.bind=function(a,b){this.rb(a,b)};z.prototype.bind=z.prototype.bind;z.prototype.Sf=function(a,b){this.Sb(a,b)};z.prototype.unbind=z.prototype.Sf;z.prototype.Nd=function(a){switch(a){case yb.Ec:return[this.ie[yb.Ec]]}return null};var yb={Ec:"authStateChanged",ef:"authTokenExpired"};z.prototype.ge=yb;function zb(a,b,c){this.ba=c;this.lf=a;this.Mf=b;this.bd=0;this.Rc=null}zb.prototype.get=function(){var a;0<this.bd?(this.bd--,a=this.Rc,this.Rc=a.next,a.next=null):a=this.lf();return a};zb.prototype.put=function(a){this.Mf(a);this.bd<this.ba&&(this.bd++,a.next=this.Rc,this.Rc=a)};function Ab(){this.Ad=this.ac=null}var Cb=new zb(function(){return new Bb},function(a){a.reset()},100);Ab.prototype.add=function(a,b){var c=Cb.get();c.set(a,b);this.Ad?this.Ad.next=c:this.ac=c;this.Ad=c};Ab.prototype.remove=function(){var a=null;this.ac&&(a=this.ac,this.ac=this.ac.next,this.ac||(this.Ad=null),a.next=null);return a};function Bb(){this.next=this.scope=this.Jd=null}Bb.prototype.set=function(a,b){this.Jd=a;this.scope=b;this.next=null};
Bb.prototype.reset=function(){this.next=this.scope=this.Jd=null};function Db(a){n.setTimeout(function(){throw a;},0)}var Eb;
function Fb(){var a=n.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&-1==Ia.indexOf("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=r(function(a){if(("*"==d||a.origin==
d)&&a.data==c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==Ia.indexOf("Trident")&&-1==Ia.indexOf("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(p(c.next)){c=c.next;var a=c.bb;c.bb=null;a()}};return function(a){d.next={bb:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=
document.createElement("SCRIPT");b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){n.setTimeout(a,0)}};function Gb(a,b){Hb||Ib();Jb||(Hb(),Jb=!0);Kb.add(a,b)}var Hb;function Ib(){var a=n.Promise;if(-1!=String(a).indexOf("[native code]")){var b=a.resolve(void 0);Hb=function(){b.then(Lb)}}else Hb=function(){var a=Lb,b;!(b=!fa(n.setImmediate))&&(b=n.Window&&n.Window.prototype)&&(b=-1==Ia.indexOf("Edge")&&n.Window.prototype.setImmediate==n.setImmediate);b?(Eb||(Eb=Fb()),Eb(a)):n.setImmediate(a)}}var Jb=!1,Kb=new Ab;
function Lb(){for(var a;a=Kb.remove();){try{a.Jd.call(a.scope)}catch(b){Db(b)}Cb.put(a)}Jb=!1};function Mb(a,b){this.X=Nb;this.Re=void 0;this.Ab=this.ab=this.xa=null;this.Oc=this.Id=!1;if(a!=aa)try{var c=this;a.call(b,function(a){Ob(c,Pb,a)},function(a){if(!(a instanceof Qb))try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(e){}Ob(c,Rb,a)})}catch(d){Ob(this,Rb,d)}}var Nb=0,Pb=2,Rb=3;function Sb(){this.next=this.context=this.Tb=this.wc=this.o=null;this.Dc=!1}Sb.prototype.reset=function(){this.context=this.Tb=this.wc=this.o=null;this.Dc=!1};
var Tb=new zb(function(){return new Sb},function(a){a.reset()},100);function Ub(a,b,c){var d=Tb.get();d.wc=a;d.Tb=b;d.context=c;return d}Mb.prototype.then=function(a,b,c){return Vb(this,fa(a)?a:null,fa(b)?b:null,c)};Mb.prototype.then=Mb.prototype.then;Mb.prototype.$goog_Thenable=!0;h=Mb.prototype;h.Rf=function(a,b){return Vb(this,null,a,b)};h.cancel=function(a){this.X==Nb&&Gb(function(){var b=new Qb(a);Wb(this,b)},this)};
function Wb(a,b){if(a.X==Nb)if(a.xa){var c=a.xa;if(c.ab){for(var d=0,e=null,f=null,g=c.ab;g&&(g.Dc||(d++,g.o==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.X==Nb&&1==d?Wb(c,b):(f?(d=f,d.next==c.Ab&&(c.Ab=d),d.next=d.next.next):Xb(c),Yb(c,e,Rb,b)))}a.xa=null}else Ob(a,Rb,b)}function Zb(a,b){a.ab||a.X!=Pb&&a.X!=Rb||$b(a);a.Ab?a.Ab.next=b:a.ab=b;a.Ab=b}
function Vb(a,b,c,d){var e=Ub(null,null,null);e.o=new Mb(function(a,g){e.wc=b?function(c){try{var e=b.call(d,c);a(e)}catch(m){g(m)}}:a;e.Tb=c?function(b){try{var e=c.call(d,b);!p(e)&&b instanceof Qb?g(b):a(e)}catch(m){g(m)}}:g});e.o.xa=a;Zb(a,e);return e.o}h.Tf=function(a){this.X=Nb;Ob(this,Pb,a)};h.Uf=function(a){this.X=Nb;Ob(this,Rb,a)};
function Ob(a,b,c){if(a.X==Nb){a===c&&(b=Rb,c=new TypeError("Promise cannot resolve to itself"));a.X=1;var d;a:{var e=c,f=a.Tf,g=a.Uf;if(e instanceof Mb)Zb(e,Ub(f||aa,g||null,a)),d=!0;else{var k;if(e)try{k=!!e.$goog_Thenable}catch(m){k=!1}else k=!1;if(k)e.then(f,g,a),d=!0;else{if(ga(e))try{var l=e.then;if(fa(l)){ac(e,l,f,g,a);d=!0;break a}}catch(m){g.call(a,m);d=!0;break a}d=!1}}}d||(a.Re=c,a.X=b,a.xa=null,$b(a),b!=Rb||c instanceof Qb||bc(a,c))}}
function ac(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function g(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,g,f)}catch(l){f(l)}}function $b(a){a.Id||(a.Id=!0,Gb(a.rf,a))}function Xb(a){var b=null;a.ab&&(b=a.ab,a.ab=b.next,b.next=null);a.ab||(a.Ab=null);return b}h.rf=function(){for(var a;a=Xb(this);)Yb(this,a,this.X,this.Re);this.Id=!1};
function Yb(a,b,c,d){if(c==Rb&&b.Tb&&!b.Dc)for(;a&&a.Oc;a=a.xa)a.Oc=!1;if(b.o)b.o.xa=null,cc(b,c,d);else try{b.Dc?b.wc.call(b.context):cc(b,c,d)}catch(e){dc.call(null,e)}Tb.put(b)}function cc(a,b,c){b==Pb?a.wc.call(a.context,c):a.Tb&&a.Tb.call(a.context,c)}function bc(a,b){a.Oc=!0;Gb(function(){a.Oc&&dc.call(null,b)})}var dc=Db;function Qb(a){wa.call(this,a)}t(Qb,wa);Qb.prototype.name="cancel";var ec="undefined"!=typeof Promise?Promise:"undefined"!=typeof n.Promise?n.Promise:Mb;n.setTimeout||(n.setTimeout=function(){setTimeout.apply(null,arguments)});Mb.prototype["catch"]=Mb.prototype.Rf;function fc(){var a=this;this.reject=this.resolve=null;this.ra=new ec(function(b,c){a.resolve=b;a.reject=c})}function gc(a,b){return function(c,d){c?a.reject(c):a.resolve(d);fa(b)&&(hc(a.ra),1===b.length?b(c):b(c,d))}}function hc(a){a.then(void 0,aa)};function A(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function B(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]}function ic(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(c,a[c])};function jc(a){this.gc=a;this.gd="wilddog:"}jc.prototype.set=function(a,b){null==b?this.gc.removeItem(this.gd+a):this.gc.setItem(this.gd+a,u(b))};jc.prototype.get=function(a){a=this.gc.getItem(this.gd+a);return null==a?null:sa(a)};jc.prototype.remove=function(a){this.gc.removeItem(this.gd+a)};jc.prototype.toString=function(){return this.gc.toString()};function kc(){this.bc={}}kc.prototype.set=function(a,b){null==b?delete this.bc[a]:this.bc[a]=b};kc.prototype.get=function(a){return A(this.bc,a)?this.bc[a]:null};kc.prototype.remove=function(a){delete this.bc[a]};function lc(a){try{if("undefined"!==typeof window&&"undefined"!==typeof window[a]){var b=window[a];b.setItem("wilddog:sentinel","cache");b.removeItem("wilddog:sentinel");return new jc(b)}}catch(c){}return new kc}var mc=lc("localStorage");function nc(a){var b=[];ic(a,function(a,d){da(d)?ya(d,function(c){b.push(encodeURIComponent(a)+"="+encodeURIComponent(c))}):b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))});return b.length?"&"+b.join("&"):""};function oc(){var a=window.opener.frames,b;for(b=a.length-1;0<=b;b--)try{if(a[b].location.protocol===window.location.protocol&&a[b].location.host===window.location.host&&"__winchan_relay_frame"===a[b].name)return a[b]}catch(c){}return null}function pc(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,!1)}function qc(a,b){a.detachEvent?a.detachEvent("onmessage",b):a.removeEventListener&&a.removeEventListener("message",b,!1)};function rc(){if("undefined"===typeof navigator)return!1;var a=navigator.userAgent;if("Microsoft Internet Explorer"===navigator.appName){if((a=a.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/))&&1<a.length)return 8<=parseFloat(a[1])}else if(-1<a.indexOf("Trident")&&(a=a.match(/rv:([0-9]{2,2}[\.0-9]{0,})/))&&1<a.length)return 8<=parseFloat(a[1]);return!1};var jb=lc("sessionStorage"),sc=new function(){};function C(a,b,c,d){var e;d<b?e="at least "+b:d>c&&(e=0===c?"none":"no more than "+c);if(e)throw Error(a+" failed: Was called with "+d+(1===d?" argument.":" arguments.")+" Expects "+e+".");}function tc(a,b,c){switch(b){case 1:b=c?"first":"First";break;case 2:b=c?"second":"Second";break;case 3:b=c?"third":"Third";break;case 4:b=c?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?");}return a+" failed: "+(b+" argument ")}
function D(a,b,c,d){if((!d||p(c))&&!fa(c))throw Error(tc(a,b,d)+"must be a valid function.");}function uc(a,b,c){if(p(c)&&(!ga(c)||null===c))throw Error(tc(a,b,!0)+"must be a valid context object.");};function E(a,b){if(1==arguments.length){this.w=a.split("/");for(var c=0,d=0;d<this.w.length;d++)0<this.w[d].length&&(this.w[c]=this.w[d],c++);this.w.length=c;this.$=0}else this.w=a,this.$=b}function F(a,b){var c=G(a);if(null===c)return b;if(c===G(b))return F(H(a),H(b));throw Error("INTERNAL ERROR: innerPath ("+b+") is not within outerPath ("+a+")");}function G(a){return a.$>=a.w.length?null:a.w[a.$]}function vc(a){return a.w.length-a.$}
function H(a){var b=a.$;b<a.w.length&&b++;return new E(a.w,b)}function wc(a){return a.$<a.w.length?a.w[a.w.length-1]:null}h=E.prototype;h.toString=function(){for(var a="",b=this.$;b<this.w.length;b++)""!==this.w[b]&&(a+="/"+this.w[b]);return a||"/"};h.slice=function(a){return this.w.slice(this.$+(a||0))};h.parent=function(){if(this.$>=this.w.length)return null;for(var a=[],b=this.$;b<this.w.length-1;b++)a.push(this.w[b]);return new E(a,0)};
h.o=function(a){for(var b=[],c=this.$;c<this.w.length;c++)b.push(this.w[c]);if(a instanceof E)for(c=a.$;c<a.w.length;c++)b.push(a.w[c]);else for(a=a.split("/"),c=0;c<a.length;c++)0<a[c].length&&b.push(a[c]);return new E(b,0)};h.f=function(){return this.$>=this.w.length};h.aa=function(a){if(vc(this)!==vc(a))return!1;for(var b=this.$,c=a.$;b<=this.w.length;b++,c++)if(this.w[b]!==a.w[c])return!1;return!0};
h.contains=function(a){var b=this.$,c=a.$;if(vc(this)>vc(a))return!1;for(;b<this.w.length;){if(this.w[b]!==a.w[c])return!1;++b;++c}return!0};var I=new E("");function xc(a,b){this.Pa=a.slice();this.Ea=Math.max(1,this.Pa.length);this.qe=b;for(var c=0;c<this.Pa.length;c++)this.Ea+=yc(this.Pa[c]);zc(this)}xc.prototype.push=function(a){0<this.Pa.length&&(this.Ea+=1);this.Pa.push(a);this.Ea+=yc(a);zc(this)};xc.prototype.pop=function(){var a=this.Pa.pop();this.Ea-=yc(a);0<this.Pa.length&&--this.Ea};
function zc(a){if(768<a.Ea)throw Error(a.qe+"has a key path longer than 768 bytes ("+a.Ea+").");if(32<a.Pa.length)throw Error(a.qe+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ac(a));}function Ac(a){return 0==a.Pa.length?"":"in property '"+a.Pa.join(".")+"'"};function yc(a){for(var b=0,c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b++:2048>d?b+=2:55296<=d&&56319>=d?(b+=4,c++):b+=3}return b};var Bc=/[\[\].#$\/\u0000-\u001F\u007F]/,Cc=/[\[\].#$\u0000-\u001F\u007F]/;function Dc(a){return q(a)&&0!==a.length&&!Bc.test(a)}function Ec(a){return null===a||q(a)||ea(a)&&!nb(a)||ga(a)&&A(a,".sv")}function Fc(a,b,c,d){d&&!p(b)||Gc(tc(a,1,d),b,c)}
function Gc(a,b,c){c instanceof E&&(c=new xc(c,a));if(!p(b))throw Error(a+"contains undefined "+Ac(c));if(fa(b))throw Error(a+"contains a function "+Ac(c)+" with contents: "+b.toString());if(nb(b))throw Error(a+"contains "+b.toString()+" "+Ac(c));if(q(b)&&b.length>10485760/3&&10485760<yc(b))throw Error(a+"contains a string greater than 10485760 utf8 bytes "+Ac(c)+" ('"+b.substring(0,50)+"...')");if(ga(b)){var d=!1,e=!1;ic(b,function(b,g){if(".value"===b)d=!0;else if(".priority"!==b&&".sv"!==b&&(e=
!0,!Dc(b)))throw Error(a+" contains an invalid key ("+b+") "+Ac(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');c.push(b);Gc(a,g,c);c.pop()});if(d&&e)throw Error(a+' contains ".value" child '+Ac(c)+" in addition to actual children.");}}
function Hc(a,b){var c,d;for(c=0;c<b.length;c++){d=b[c];for(var e=d.slice(),f=0;f<e.length;f++)if((".priority"!==e[f]||f!==e.length-1)&&!Dc(e[f]))throw Error(a+"contains an invalid key ("+e[f]+") in path "+d.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');}b.sort(E.Yf);e=null;for(c=0;c<b.length;c++){d=b[c];if(null!==e&&e.contains(d))throw Error(a+"contains a path "+e.toString()+" that is ancestor of another path "+d.toString());e=d}}
function Ic(a,b,c){var d=tc(a,1,!1);if(!ga(b)||da(b))throw Error(d+" must be an Object containing the children to replace.");if(A(b,".value"))throw Error(d+' must not contain ".value".  To overwrite with a leaf value, just use .set() instead.');var e=[];ic(b,function(a,b){var f=new E(a);Gc(d,b,c.o(f));if(".priority"===wc(f)&&!Ec(b))throw Error(d+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");e.push(f)});
Hc(d,e)}function Jc(a,b,c){if(nb(c))throw Error(tc(a,b,!1)+"is "+c.toString()+", but must be a valid Wilddog priority (a string, finite number, server value, or null).");if(!Ec(c))throw Error(tc(a,b,!1)+"must be a valid Wilddog priority (a string, finite number, server value, or null).");}
function Kc(a,b,c){if(!c||p(b))switch(b){case "value":case "child_added":case "child_removed":case "child_changed":case "child_moved":break;default:throw Error(tc(a,1,c)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".');}}function Lc(a,b,c,d){if((!d||p(c))&&!Dc(c))throw Error(tc(a,b,d)+'was an invalid key: "'+c+'".  Wilddog keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").');}
function Mc(a,b){if(!q(b)||0===b.length||Cc.test(b))throw Error(tc(a,1,!1)+'was an invalid path: "'+b+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"');}function Nc(a,b){b&&(b=b.replace(/^\/*\.info(\/|$)/,"/"));Mc(a,b)}function K(a,b){if(".info"===G(b))throw Error(a+" failed: Can't modify data under /.info/");};function Oc(){this.ne="DEFAULT";this.Bf={};this.Dd={};this.app=null}Oc.prototype.zf=function(a,b){var c=b||this.ne;this.Dd[c]=new z(a,c);if(b==this.ne||null==b)this.app=this.Dd[c];return this.Dd[c]};Oc.prototype.initializeApp=Oc.prototype.zf;Oc.prototype.Oe=function(a,b){this.Bf[a]=b;xb(a,b);this[a]=function(){return this.app[a]()}};Oc.prototype.regService=Oc.prototype.Oe;Oc.prototype.he=CLIENT_VERSION;Oc.prototype.SDK_VERSION=Oc.prototype.he;var Pc=new Oc;function Qc(a,b){return ob(a.name,b.name)}function Rc(a,b){return ob(a,b)};function Sc(){}var Tc={};function Uc(a){return r(a.compare,a)}Sc.prototype.Tc=function(a,b){return 0!==this.compare(new L("[MIN_NAME]",a),new L("[MIN_NAME]",b))};function Vc(a){this.Ob=a}t(Vc,Sc);h=Vc.prototype;h.kc=function(a){return!a.O(this.Ob).f()};h.compare=function(a,b){var c=a.node.O(this.Ob),d=b.node.O(this.Ob),c=c.ec(d);return 0===c?ob(a.name,b.name):c};h.qc=function(a,b){var c=M(a),c=N.S(this.Ob,c);return new L(b,c)};h.rc=function(){var a=N.S(this.Ob,Wc);return new L("[MAX_NAME]",a)};
h.toString=function(){return this.Ob};function Xc(){}t(Xc,Sc);h=Xc.prototype;h.compare=function(a,b){var c=a.node.D(),d=b.node.D(),c=c.ec(d);return 0===c?ob(a.name,b.name):c};h.kc=function(a){return!a.D().f()};h.Tc=function(a,b){return!a.D().aa(b.D())};h.rc=function(){return new L("[MAX_NAME]",new Yc("[PRIORITY-POST]",Wc))};h.qc=function(a,b){var c=M(a);return new L(b,new Yc("[PRIORITY-POST]",c))};h.toString=function(){return".priority"};var O=new Xc;function Zc(){}t(Zc,Sc);h=Zc.prototype;
h.compare=function(a,b){return ob(a.name,b.name)};h.kc=function(){throw cb("KeyIndex.isDefinedOn not expected to be called.");};h.Tc=function(){return!1};h.rc=function(){return new L("[MAX_NAME]",N)};h.qc=function(a){x(q(a),"KeyIndex indexValue must always be a string.");return new L(a,N)};h.toString=function(){return".key"};var $c=new Zc;function ad(){}t(ad,Sc);h=ad.prototype;h.compare=function(a,b){var c=a.node.ec(b.node);return 0===c?ob(a.name,b.name):c};h.kc=function(){return!0};
h.Tc=function(a,b){return!a.aa(b)};h.rc=function(){return bd};h.qc=function(a,b){var c=M(a);return new L(b,c)};h.toString=function(){return".value"};var cd=new ad;function dd(a,b){this.Uc=a;this.Pb=b}dd.prototype.get=function(a){var b=B(this.Uc,a);if(!b)throw Error("No index defined for "+a);return b===Tc?null:b};function ed(a,b,c){var d=La(a.Uc,function(d,f){var e=B(a.Pb,f);x(e,"Missing index implementation for "+f);if(d===Tc){if(e.kc(b.node)){for(var k=[],l=c.Ib(fd),m=P(l);m;)m.name!=b.name&&k.push(m),m=P(l);k.push(b);return hd(k,Uc(e))}return Tc}e=c.get(b.name);k=d;e&&(k=k.remove(new L(b.name,e)));return k.Na(b,b.node)});return new dd(d,a.Pb)}
function id(a,b,c){var d=La(a.Uc,function(a){if(a===Tc)return a;var d=c.get(b.name);return d?a.remove(new L(b.name,d)):a});return new dd(d,a.Pb)}var jd=new dd({".priority":Tc},{".priority":O});function L(a,b){this.name=a;this.node=b}function fd(a,b){return new L(a,b)};function Yc(a,b){this.G=a;x(p(this.G)&&null!==this.G,"LeafNode shouldn't be created with null/undefined value.");this.ca=b||N;kd(this.ca);this.pb=null}h=Yc.prototype;h.P=function(){return!0};h.D=function(){return this.ca};h.da=function(a){return new Yc(this.G,a)};h.O=function(a){return".priority"===a?this.ca:N};h.oa=function(a){return a.f()?this:".priority"===G(a)?this.ca:N};h.Ha=function(){return!1};h.ve=function(){return null};
h.S=function(a,b){return".priority"===a?this.da(b):b.f()&&".priority"!==a?this:N.S(a,b).da(this.ca)};h.J=function(a,b){var c=G(a);if(null===c)return b;if(b.f()&&".priority"!==c)return this;x(".priority"!==c||1===vc(a),".priority must be the last token in a path");return this.S(c,N.J(H(a),b))};h.f=function(){return!1};h.qb=function(){return 0};h.N=function(a){return a&&!this.D().f()?{".value":this.Ca(),".priority":this.D().N()}:this.Ca()};
h.hash=function(){if(null===this.pb){var a="";this.ca.f()||(a+="priority:"+ld(this.ca.N())+":");var b=typeof this.G,a=a+(b+":"),a="number"===b?a+sb(this.G):a+this.G;this.pb=fb(a)}return this.pb};h.Ca=function(){return this.G};h.ec=function(a){if(a===N)return 1;if(a instanceof Q)return-1;x(a.P(),"Unknown node type");var b=typeof a.G,c=typeof this.G,d=xa(md,b),e=xa(md,c);x(0<=d,"Unknown leaf type: "+b);x(0<=e,"Unknown leaf type: "+c);return d===e?"object"===c?0:this.G<a.G?-1:this.G===a.G?0:1:e-d};
var md=["object","boolean","number","string"];Yc.prototype.ib=function(){return this};Yc.prototype.lc=function(){return!0};Yc.prototype.aa=function(a){return a===this?!0:a.P()?this.G===a.G&&this.ca.aa(a.ca):!1};Yc.prototype.toString=function(){return u(this.N(!0))};function nd(a,b){this.La=a;this.ya=b?b:od}h=nd.prototype;h.Na=function(a,b){return new nd(this.La,this.ya.Na(a,b,this.La).Z(null,null,pd,null,null))};h.remove=function(a){return new nd(this.La,this.ya.remove(a,this.La).Z(null,null,pd,null,null))};h.get=function(a){for(var b,c=this.ya;!c.f();){b=this.La(a,c.key);if(0===b)return c.value;0>b?c=c.left:0<b&&(c=c.right)}return null};
function qd(a,b){for(var c,d=a.ya,e=null;!d.f();){c=a.La(b,d.key);if(0===c){if(d.left.f())return e?e.key:null;for(d=d.left;!d.right.f();)d=d.right;return d.key}0>c?d=d.left:0<c&&(e=d,d=d.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?");}h.f=function(){return this.ya.f()};h.count=function(){return this.ya.count()};h.tc=function(){return this.ya.tc()};h.Rb=function(){return this.ya.Rb()};h.ja=function(a){return this.ya.ja(a)};
h.Ib=function(a){return new rd(this.ya,null,this.La,!1,a)};h.Jb=function(a,b){return new rd(this.ya,a,this.La,!1,b)};h.Lb=function(a,b){return new rd(this.ya,a,this.La,!0,b)};h.we=function(a){return new rd(this.ya,null,this.La,!0,a)};function rd(a,b,c,d,e){this.md=e||null;this.Sd=d;for(this.Oa=[];!a.f();)if(e=b?c(a.key,b):1,d&&(e*=-1),0>e)a=this.Sd?a.left:a.right;else if(0===e){this.Oa.push(a);break}else this.Oa.push(a),a=this.Sd?a.right:a.left}
function P(a){if(0===a.Oa.length)return null;var b=a.Oa.pop(),c;c=a.md?a.md(b.key,b.value):{key:b.key,value:b.value};if(a.Sd)for(b=b.left;!b.f();)a.Oa.push(b),b=b.right;else for(b=b.right;!b.f();)a.Oa.push(b),b=b.left;return c}function sd(a){if(0===a.Oa.length)return null;var b;b=a.Oa;b=b[b.length-1];return a.md?a.md(b.key,b.value):{key:b.key,value:b.value}}function td(a,b,c,d,e){this.key=a;this.value=b;this.color=null!=c?c:ud;this.left=null!=d?d:od;this.right=null!=e?e:od}var ud=!0,pd=!1;h=td.prototype;
h.Z=function(a,b,c,d,e){return new td(null!=a?a:this.key,null!=b?b:this.value,null!=c?c:this.color,null!=d?d:this.left,null!=e?e:this.right)};h.count=function(){return this.left.count()+1+this.right.count()};h.f=function(){return!1};h.ja=function(a){return this.left.ja(a)||a(this.key,this.value)||this.right.ja(a)};function vd(a){return a.left.f()?a:vd(a.left)}h.tc=function(){return vd(this).key};h.Rb=function(){return this.right.f()?this.key:this.right.Rb()};
h.Na=function(a,b,c){var d,e;e=this;d=c(a,e.key);e=0>d?e.Z(null,null,null,e.left.Na(a,b,c),null):0===d?e.Z(null,b,null,null,null):e.Z(null,null,null,null,e.right.Na(a,b,c));return wd(e)};function xd(a){if(a.left.f())return od;a.left.fa()||a.left.left.fa()||(a=yd(a));a=a.Z(null,null,null,xd(a.left),null);return wd(a)}
h.remove=function(a,b){var c,d;c=this;if(0>b(a,c.key))c.left.f()||c.left.fa()||c.left.left.fa()||(c=yd(c)),c=c.Z(null,null,null,c.left.remove(a,b),null);else{c.left.fa()&&(c=zd(c));c.right.f()||c.right.fa()||c.right.left.fa()||(c=Ad(c),c.left.left.fa()&&(c=zd(c),c=Ad(c)));if(0===b(a,c.key)){if(c.right.f())return od;d=vd(c.right);c=c.Z(d.key,d.value,null,null,xd(c.right))}c=c.Z(null,null,null,null,c.right.remove(a,b))}return wd(c)};h.fa=function(){return this.color};
function wd(a){a.right.fa()&&!a.left.fa()&&(a=Bd(a));a.left.fa()&&a.left.left.fa()&&(a=zd(a));a.left.fa()&&a.right.fa()&&(a=Ad(a));return a}function yd(a){a=Ad(a);a.right.left.fa()&&(a=a.Z(null,null,null,null,zd(a.right)),a=Bd(a),a=Ad(a));return a}function Bd(a){return a.right.Z(null,null,a.color,a.Z(null,null,ud,null,a.right.left),null)}function zd(a){return a.left.Z(null,null,a.color,null,a.Z(null,null,ud,a.left.right,null))}
function Ad(a){return a.Z(null,null,!a.color,a.left.Z(null,null,!a.left.color,null,null),a.right.Z(null,null,!a.right.color,null,null))}function Cd(){}h=Cd.prototype;h.Z=function(){return this};h.Na=function(a,b){return new td(a,b,null)};h.remove=function(){return this};h.count=function(){return 0};h.f=function(){return!0};h.ja=function(){return!1};h.tc=function(){return null};h.Rb=function(){return null};h.fa=function(){return!1};var od=new Cd;function Q(a,b,c){this.u=a;(this.ca=b)&&kd(this.ca);a.f()&&x(!this.ca||this.ca.f(),"An empty node cannot have a priority");this.nb=c;this.pb=null}h=Q.prototype;h.P=function(){return!1};h.D=function(){return this.ca||N};h.da=function(a){return this.u.f()?this:new Q(this.u,a,this.nb)};h.O=function(a){if(".priority"===a)return this.D();a=this.u.get(a);return null===a?N:a};h.oa=function(a){var b=G(a);return null===b?this:this.O(b).oa(H(a))};h.Ha=function(a){return null!==this.u.get(a)};
h.S=function(a,b){x(b,"We should always be passing snapshot nodes");if(".priority"===a)return this.da(b);var c=new L(a,b),d,e;b.f()?(d=this.u.remove(a),c=id(this.nb,c,this.u)):(d=this.u.Na(a,b),c=ed(this.nb,c,this.u));e=d.f()?N:this.ca;return new Q(d,e,c)};h.J=function(a,b){var c=G(a);if(null===c)return b;x(".priority"!==G(a)||1===vc(a),".priority must be the last token in a path");var d=this.O(c).J(H(a),b);return this.S(c,d)};h.f=function(){return this.u.f()};h.qb=function(){return this.u.count()};
var Dd=/^(0|[1-9]\d*)$/;h=Q.prototype;h.N=function(a){if(this.f())return null;var b={},c=0,d=0,e=!0;this.V(O,function(f,g){b[f]=g.N(a);c++;e&&Dd.test(f)?d=Math.max(d,Number(f)):e=!1});if(!a&&e&&d<2*c){var f=[],g;for(g in b)f[g]=b[g];return f}a&&!this.D().f()&&(b[".priority"]=this.D().N());return b};h.hash=function(){if(null===this.pb){var a="";this.D().f()||(a+="priority:"+ld(this.D().N())+":");this.V(O,function(b,c){var d=c.hash();""!==d&&(a+=":"+b+":"+d)});this.pb=""===a?"":fb(a)}return this.pb};
h.ve=function(a,b,c){return(c=Ed(this,c))?(a=qd(c,new L(a,b)))?a.name:null:qd(this.u,a)};function Fd(a,b){var c;c=(c=Ed(a,b))?(c=c.tc())&&c.name:a.u.tc();return c?new L(c,a.u.get(c)):null}function Gd(a,b){var c;c=(c=Ed(a,b))?(c=c.Rb())&&c.name:a.u.Rb();return c?new L(c,a.u.get(c)):null}h.V=function(a,b){var c=Ed(this,a);return c?c.ja(function(a){return b(a.name,a.node)}):this.u.ja(b)};h.Ib=function(a){return this.Jb(Hd,a)};
h.Jb=function(a,b){var c=Ed(this,b);if(c)return c.Jb(a,function(a){return a});for(var c=this.u.Jb(a.name,fd),d=sd(c);null!=d&&0>b.compare(d,a);)P(c),d=sd(c);return c};h.we=function(a){return this.Lb(a.rc(),a)};h.Lb=function(a,b){var c=Ed(this,b);if(c)return c.Lb(a,function(a){return a});for(var c=this.u.Lb(a.name,fd),d=sd(c);null!=d&&0<b.compare(d,a);)P(c),d=sd(c);return c};h.ec=function(a){return this.f()?a.f()?0:-1:a.P()||a.f()?1:a===Wc?-1:0};
h.ib=function(a){if(a===$c||Sa(this.nb.Pb,a.toString()))return this;var b=this.nb,c=this.u;x(a!==$c,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var d=[],e=!1,c=c.Ib(fd),f=P(c);f;)e=e||a.kc(f.node),d.push(f),f=P(c);d=e?hd(d,Uc(a)):Tc;e=a.toString();c=Wa(b.Pb);c[e]=a;a=Wa(b.Uc);a[e]=d;return new Q(this.u,this.ca,new dd(a,c))};h.lc=function(a){return a===$c||Sa(this.nb.Pb,a.toString())};
h.aa=function(a){if(a===this)return!0;if(a.P())return!1;if(this.D().aa(a.D())&&this.u.count()===a.u.count()){var b=this.Ib(O);a=a.Ib(O);for(var c=P(b),d=P(a);c&&d;){if(c.name!==d.name||!c.node.aa(d.node))return!1;c=P(b);d=P(a)}return null===c&&null===d}return!1};function Ed(a,b){return b===$c?null:a.nb.get(b.toString())}h.toString=function(){return u(this.N(!0))};function M(a,b){if(null===a)return N;var c=null;"object"===typeof a&&".priority"in a?c=a[".priority"]:"undefined"!==typeof b&&(c=b);x(null===c||"string"===typeof c||"number"===typeof c||"object"===typeof c&&".sv"in c,"Invalid priority type found: "+typeof c);"object"===typeof a&&".value"in a&&null!==a[".value"]&&(a=a[".value"]);if("object"!==typeof a||".sv"in a)return new Yc(a,M(c));if(a instanceof Array){var d=N,e=a;v(e,function(a,b){if(A(e,b)&&"."!==b.substring(0,1)){var c=M(a);if(c.P()||!c.f())d=
d.S(b,c)}});return d.da(M(c))}var f=[],g=!1,k=a;ic(k,function(a){if("string"!==typeof a||"."!==a.substring(0,1)){var b=M(k[a]);b.f()||(g=g||!b.D().f(),f.push(new L(a,b)))}});if(0==f.length)return N;var l=hd(f,Qc,function(a){return a.name},Rc);if(g){var m=hd(f,Uc(O));return new Q(l,M(c),new dd({".priority":m},{".priority":O}))}return new Q(l,M(c),jd)}var Id=Math.log(2);
function Jd(a){this.count=parseInt(Math.log(a+1)/Id,10);this.me=this.count-1;this.gf=a+1&parseInt(Array(this.count+1).join("1"),2)}function Kd(a){var b=!(a.gf&1<<a.me);a.me--;return b}
function hd(a,b,c,d){function e(b,d){var f=d-b;if(0==f)return null;if(1==f){var g=a[b],k=c?c(g):g;return new td(k,g.node,pd,null,null)}var g=parseInt(f/2,10)+b,f=e(b,g),w=e(g+1,d),g=a[g],k=c?c(g):g;return new td(k,g.node,pd,f,w)}a.sort(b);var f=function(b){function d(b,d){var k=J-b,l=J;J-=b;var l=e(k+1,l),k=a[k],m=c?c(k):k,l=new td(m,k.node,d,null,l);f?f.left=l:g=l;f=l}for(var f=null,g=null,J=a.length,w=0;w<b.count;++w){var U=Kd(b),gd=Math.pow(2,b.count-(w+1));U?d(gd,pd):(d(gd,pd),d(gd,ud))}return g}(new Jd(a.length));
return null!==f?new nd(d||b,f):new nd(d||b)}function ld(a){return"number"===typeof a?"number:"+sb(a):"string:"+a}function kd(a){if(a.P()){var b=a.N();x("string"===typeof b||"number"===typeof b||"object"===typeof b&&A(b,".sv"),"Priority must be a string or number.")}else x(a===Wc||a.f(),"priority of unexpected type.");x(a===Wc||a.D().f(),"Priority nodes can't have a priority of their own.")}var N=new Q(new nd(Rc),null,jd);function Ld(){Q.call(this,new nd(Rc),N,jd)}t(Ld,Q);h=Ld.prototype;
h.ec=function(a){return a===this?0:1};h.aa=function(a){return a===this};h.D=function(){return this};h.O=function(){return N};h.f=function(){return!1};var Wc=new Ld,Hd=new L("[MIN_NAME]",N),bd=new L("[MAX_NAME]",Wc);function R(a,b,c){this.F=a;this.W=b;this.g=c}R.prototype.N=function(){C("Wilddog.DataSnapshot.val",0,0,arguments.length);return this.F.N()};R.prototype.val=R.prototype.N;R.prototype.re=function(){C("Wilddog.DataSnapshot.exportVal",0,0,arguments.length);return this.F.N(!0)};R.prototype.exportVal=R.prototype.re;R.prototype.sf=function(){C("Wilddog.DataSnapshot.exists",0,0,arguments.length);return!this.F.f()};R.prototype.exists=R.prototype.sf;
R.prototype.o=function(a){C("Wilddog.DataSnapshot.child",0,1,arguments.length);ea(a)&&(a=String(a));Mc("Wilddog.DataSnapshot.child",a);var b=new E(a),c=this.W.o(b);return new R(this.F.oa(b),c,O)};R.prototype.child=R.prototype.o;R.prototype.Ha=function(a){C("Wilddog.DataSnapshot.hasChild",1,1,arguments.length);Mc("Wilddog.DataSnapshot.hasChild",a);var b=new E(a);return!this.F.oa(b).f()};R.prototype.hasChild=R.prototype.Ha;
R.prototype.D=function(){C("Wilddog.DataSnapshot.getPriority",0,0,arguments.length);return this.F.D().N()};R.prototype.getPriority=R.prototype.D;R.prototype.forEach=function(a){C("Wilddog.DataSnapshot.forEach",1,1,arguments.length);D("Wilddog.DataSnapshot.forEach",1,a,!1);if(this.F.P())return!1;var b=this;return!!this.F.V(this.g,function(c,d){return a(new R(d,b.W.o(c),O))})};R.prototype.forEach=R.prototype.forEach;
R.prototype.Pc=function(){C("Wilddog.DataSnapshot.hasChildren",0,0,arguments.length);return this.F.P()?!1:!this.F.f()};R.prototype.hasChildren=R.prototype.Pc;R.prototype.name=function(){y("Wilddog.DataSnapshot.name() being deprecated. Please use Wilddog.DataSnapshot.key() instead.");C("Wilddog.DataSnapshot.name",0,0,arguments.length);return this.key()};R.prototype.name=R.prototype.name;R.prototype.key=function(){C("Wilddog.DataSnapshot.key",0,0,arguments.length);return this.W.key()};
R.prototype.key=R.prototype.key;R.prototype.qb=function(){C("Wilddog.DataSnapshot.numChildren",0,0,arguments.length);return this.F.qb()};R.prototype.numChildren=R.prototype.qb;R.prototype.Xb=function(){C("Wilddog.DataSnapshot.ref",0,0,arguments.length);return this.W};R.prototype.ref=R.prototype.Xb;function Md(){vb.call(this,["online"]);this.Ub=!0;if("undefined"!==typeof window&&"undefined"!==typeof window.addEventListener){var a=this;window.addEventListener("online",function(){a.Ub||(a.Ub=!0,a.xd("online",!0))},!1);window.addEventListener("offline",function(){a.Ub&&(a.Ub=!1,a.xd("online",!1))},!1)}}t(Md,vb);Md.prototype.Nd=function(a){x("online"===a,"Unknown event type: "+a);return[this.Ub]};ba(Md);function Nd(){vb.call(this,["visible"]);var a,b;"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(b="visibilitychange",a="hidden"):"undefined"!==typeof document.mozHidden?(b="mozvisibilitychange",a="mozHidden"):"undefined"!==typeof document.msHidden?(b="msvisibilitychange",a="msHidden"):"undefined"!==typeof document.webkitHidden&&(b="webkitvisibilitychange",a="webkitHidden"));this.$b=!0;if(b){var c=this;document.addEventListener(b,
function(){var b=!document[a];b!==c.$b&&(c.$b=b,c.xd("visible",b))},!1)}}t(Nd,vb);Nd.prototype.Nd=function(a){x("visible"===a,"Unknown event type: "+a);return[this.$b]};ba(Nd);var Od,Pd=null;"undefined"!=typeof require&&"undefined"!==typeof module&&module.exports?Pd=require("engine.io-client"):window?Pd=window.eio:global&&(Pd=global.eio);Od=Pd;function Qd(a,b,c,d,e,f){this.id=a;this.m=kb("c:"+this.id+":");this.dd=c;this.xc=d;this.wa=e;this.Df=f;this.I=b;this.X=0;this.m("Connection created");this.Ma=Rd(this);this.Ma.on("open",Sd(this));this.Ma.on("error",Td(this))}function Sd(a){return function(){a.Ma.on("message",Ud(a));a.Ma.on("close",Vd(a))}}
function Ud(a){return function(b){if(null==b)throw Error("data is null");if(0!=b.charAt(0))if(2==b.charAt(0)){var c=null;try{c=JSON.parse(b.substr(1))}catch(f){throw f;}if("object"!=typeof c||2>c.length)throw Error("decodedData in wrong format");b=c[1];if("wd"==c[0])if("c"==b.t)if(c=b.d,"h"==c.t){b=c.d;var c=b.ts,d=b.v,e=b.h;a.sessionId=b.s;"1.0"!=d&&y("Protocol version mismatch detected");0==a.X&&(e==a.I.Da||a.I.Ue?(a.X=1,a.m("realtime state connected"),b=a.I,sc.rd||(d=b.eb.indexOf(a.I.Da),0<=d&&
(b.eb.splice(d,1),jb.set("failHosts",JSON.stringify(b.eb)))),a.xc&&(a.xc(c),a.xc=null)):(Wd(a.I,e),a.m("updateHost ",e),a.Ma.close(),a.Ma=Rd(a,["polling","websocket"]),a.Ma.on("open",Sd(a)),a.Ma.on("error",Td(a))))}else"r"==c.t?(c=c.d,a.m("Reset packet received.  New host: "+c),Wd(a.I,c),a.close()):"s"==c.t&&(a.Df(c.d),a.close());else"d"==b.t&&a.dd(b.d);else a.m("eventType not known")}else 1!=b.charAt(0)&&a.m("data format error")}}
function Vd(a){return function(){2!==a.X&&(a.m("Closing realtime connection."),a.X=2,a.wa&&(a.wa(),a.wa=null))}}function Td(a){return function(b){if(0==a.X){var c=a.I.Da,d=a.I;!sc.rd&&null!=c&&0>d.eb.indexOf(c)&&c!=d.host&&(d.eb.push(c),jb.set("failHosts",JSON.stringify(d.eb)));a.m("error while connecting",b,c);Wd(a.I)}a.close()}}
function Rd(a,b){var c=(a.I.od?"https://":"http://")+a.I.Da+"?v=1.0&cv="+CLIENT_VERSION,d=a.I;d.host!==d.Da&&(c=c+"&ns="+a.I.Ce);a.sessionId&&(c=c+"&s="+a.sessionId);0<a.I.eb.length&&(c=c+"&fst="+encodeURIComponent(a.I.eb.join(",")));d=mc.get("UUID");d||(d=a.Gd(),mc.set("UUID",d));var e={path:"/.ws",rememberUpgrade:!0};"undefined"==typeof document&&(e.jsonp=!1);null!=b&&(e.transports=b);c=Od(c+"&did="+d,e);eb("new Socket_",typeof c);return c}
Qd.prototype.Ya=function(a){a="2"+JSON.stringify(["wd",{t:"d",d:a}]);eb("sendRequest by eio",a);this.Ma.send(a)};Qd.prototype.close=function(){2!==this.X&&(this.m("Closing realtime connection."),this.X=2,this.Ma.close(),this.wa&&(this.wa(),this.wa=null))};Qd.prototype.Gd=function(){for(var a=0,b="";32>a;)b+="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())],a++;return b};function Xd(a,b,c,d){this.id=Yd++;this.m=kb("p:"+this.id+":");this.ze=this.Rd=!1;this.ga={};this.pa=[];this.zc=0;this.vc=[];this.ma=!1;this.Xa=1E3;this.Zc=3E5;this.sb=b;this.uc=c;this.Xd=d;this.I=a;this.ae=null;this.ld={};this.Lf=0;this.mc=this.Td=null;Zd(this,0);Nd.Hb().rb("visible",this.Hf,this);-1===a.host.indexOf("wd.local")&&Md.Hb().rb("online",this.Ff,this)}var Yd=0,$d=0;h=Xd.prototype;
h.Ya=function(a,b,c){var d=++this.Lf;a={r:d,a:a,b:b};this.m(u(a));x(this.ma,"sendRequest call when we're not connected not allowed.");this.Qa.Ya(a);c&&(this.ld[d]=c)};h.Ae=function(a,b,c,d){var e=ae(a),f=a.path.toString();this.m("Listen called for "+f+" "+e);this.ga[f]=this.ga[f]||{};x(!this.ga[f][e],"listen() called twice for same path/queryId.");a={M:d,Qc:b,query:a,tag:c};this.ga[f][e]=a;this.ma&&be(this,a)};
function be(a,b){var c=b.query,d=c.path.toString(),e=ae(c);a.m("Listen on "+d+" for "+e);var f={p:d};b.tag&&(f.q=ce(c.A),f.t=b.tag);f.h=b.Qc();a.Ya("q",f,function(f){var g=f.d,l=f.s;if(g&&"object"===typeof g&&A(g,"w")){var m=B(g,"w");da(m)&&0<=xa(m,"no_index")&&y("Using an unspecified index. Consider adding "+('".indexOn": "'+c.A.g.toString()+'"')+" at "+c.path.toString()+" to your security rules for better performance")}(a.ga[d]&&a.ga[d][e])===b&&(a.m("listen response",f),"ok"!==l&&de(a,d,e),b.M&&
b.M(l,g))})}h.ke=function(a,b,c){this.Fa={mf:a,se:!1,dc:b,Gc:c};this.m("Authenticating using credential: "+a);ee(this);40==a.length&&(this.m("Admin auth credential detected.  Reducing max reconnect time."),this.Zc=3E4)};h.We=function(a){delete this.Fa;this.ma&&this.Ya("unauth",{},function(b){a(b.s,b.d)})};function ee(a){var b=a.Fa;a.ma&&b&&a.Ya("auth",{cred:b.mf},function(c){var d=c.s;c=c.d||"error";"ok"!==d&&a.Fa===b&&delete a.Fa;b.se?"ok"!==d&&b.Gc&&b.Gc(d,c):(b.se=!0,b.dc&&b.dc(d,c))})}
h.Xe=function(a,b){var c=a.path.toString(),d=ae(a);this.m("Unlisten called for "+c+" "+d);if(de(this,c,d)&&this.ma){var e=ce(a.A);this.m("Unlisten on "+c+" for "+d);c={p:c};b&&(c.q=e,c.t=b);this.Ya("n",c)}};h.Wd=function(a,b,c){this.ma?fe(this,"o",a,b,c):this.vc.push({Yd:a,action:"o",data:b,M:c})};h.Ee=function(a,b,c){this.ma?fe(this,"om",a,b,c):this.vc.push({Yd:a,action:"om",data:b,M:c})};h.cd=function(a,b){this.ma?fe(this,"oc",a,null,b):this.vc.push({Yd:a,action:"oc",data:null,M:b})};
function fe(a,b,c,d,e){c={p:c,d:d};a.m("onDisconnect "+b,c);a.Ya(b,c,function(a){e&&setTimeout(function(){e(a.s,a.d)},Math.floor(0))})}h.put=function(a,b,c,d){ge(this,"p",a,b,c,d)};h.Be=function(a,b,c,d){ge(this,"m",a,b,c,d)};function ge(a,b,c,d,e,f){d={p:c,d:d};p(f)&&(d.h=f);a.pa.push({action:b,request:d,M:e});a.zc++;b=a.pa.length-1;a.ma?he(a,b):a.m("Buffering put: "+c)}
function he(a,b){var c=a.pa[b].action,d=a.pa[b].request,e=a.pa[b].M;a.pa[b].Jf=a.ma;a.Ya(c,d,function(d){a.m(c+" response",d);delete a.pa[b];a.zc--;0===a.zc&&(a.pa=[]);e&&e(d.s,d.d)})}h.Zd=function(a){if(this.ma){a={c:a};this.m("reportStats",a);var b=this;this.Ya("s",a,function(a){"ok"!==a.s&&b.m("reportStats","Error sending stats: "+a.d)})}};
h.Cf=function(a){if("r"in a){this.m("from server: "+u(a));var b=a.r,c=this.ld[b];c&&(delete this.ld[b],c(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&(b=a.a,c=a.b,this.m("handleServerMessage",b,c),"d"===b?this.sb(c.p,c.d,!1,c.t):"m"===b?this.sb(c.p,c.d,!0,c.t):"c"===b?ie(this,c.p,c.q):"ac"===b?(a=c.s,b=c.d,c=this.Fa,delete this.Fa,c&&c.Gc&&c.Gc(a,b)):"sd"===b?this.ae?this.ae(c):"msg"in c&&"undefined"!==typeof console&&console.log("WILDDOG: "+c.msg.replace("\n",
"\nWILDDOG: ")):lb("Unrecognized action received from server: "+u(b)+"\nAre you using the latest client?"))}};
h.xc=function(a){this.m("connection ready");this.ma=!0;this.mc=(new Date).getTime();this.Xd({serverTimeOffset:a-(new Date).getTime()});a=mc.get("UUID");a||(a=this.Gd(),mc.set("UUID",a));var b={};b["sdk.js."+CLIENT_VERSION.replace(/\./g,"-")]=1;b.did=a;"undefined"!==typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(navigator.userAgent)&&(b["framework.cordova"]=1);this.Zd(b);je(this);this.uc(!0)};
function Zd(a,b){x(!a.Qa,"Scheduling a connect when we're already connected/ing?");a.Db&&clearTimeout(a.Db);a.Db=setTimeout(function(){a.Db=null;ke(a)},Math.floor(b))}h.Hf=function(a){a&&!this.$b&&this.Xa===this.Zc&&(this.m("Window became visible.  Reducing delay."),this.Xa=1E3,this.Qa||Zd(this,0));this.$b=a};h.Ff=function(a){a?(this.m("Browser went online."),this.Xa=1E3,this.Qa||Zd(this,0)):(this.m("Browser went offline.  Killing connection."),this.Qa&&this.Qa.close())};
h.Fe=function(){this.m("data client disconnected");this.ma=!1;this.Qa=null;for(var a=0;a<this.pa.length;a++){var b=this.pa[a];b&&"h"in b.request&&b.Jf&&(b.M&&b.M("disconnect"),delete this.pa[a],this.zc--)}0===this.zc&&(this.pa=[]);this.ld={};le(this)&&(this.$b?this.mc&&(3E4<(new Date).getTime()-this.mc&&(this.Xa=1E3),this.mc=null):(this.m("Window isn't visible.  Delaying reconnect."),this.Xa=this.Zc,this.Td=(new Date).getTime()),a=Math.max(0,this.Xa-((new Date).getTime()-this.Td)),a*=Math.random(),
this.m("Trying to reconnect in "+a+"ms"),Zd(this,a),this.Xa=Math.min(this.Zc,1.3*this.Xa));this.uc(!1)};function ke(a){if(le(a)){a.m("Making a connection attempt");a.Td=(new Date).getTime();a.mc=null;var b=r(a.Cf,a),c=r(a.xc,a),d=r(a.Fe,a),e=a.id+":"+$d++;a.Qa=new Qd(e,a.I,b,c,d,function(b){y(b+" ("+a.I.toString()+")");a.ze=!0})}}h.jc=function(){this.Rd=!0;this.Qa?this.Qa.close():(this.Db&&(clearTimeout(this.Db),this.Db=null),this.ma&&this.Fe())};
h.resume=function(){this.Rd=!1;this.Xa=1E3;this.Qa||Zd(this,0)};function ie(a,b,c){c=c?Aa(c,function(a){return qb(a)}).join("$"):"default";(a=de(a,b,c))&&a.M&&a.M("permission_denied")}function de(a,b,c){b=(new E(b)).toString();var d;p(a.ga[b])?(d=a.ga[b][c],delete a.ga[b][c],0===Na(a.ga[b])&&delete a.ga[b]):d=void 0;return d}
function je(a){ee(a);v(a.ga,function(b){v(b,function(b){be(a,b)})});for(var b=0;b<a.pa.length;b++)a.pa[b]&&he(a,b);for(;a.vc.length;)b=a.vc.shift(),fe(a,b.action,b.Yd,b.data,b.M)}function le(a){var b;b=Md.Hb().Ub;return!a.ze&&!a.Rd&&b}h.Gd=function(){for(var a=0,b="";32>a;)b+="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())],a++;return b};function me(a,b){this.m=kb("p:rest:");this.I=a;this.sb=b;this.Fa=null;this.ga={}}function ne(a,b){if(p(b))return"tag$"+b;var c=a.A;x(S(c)&&c.g==O,"should have a tag if it's not a default query.");return a.path.toString()}h=me.prototype;
h.Ae=function(a,b,c,d){var e=a.path.toString();this.m("Listen called for "+e+" "+ae(a));var f=ne(a,c),g={};this.ga[f]=g;a=oe(a.A);var k=this;pe(this,e+".json",a,function(a,b){var l=b;404===a&&(a=l=null);null===a&&k.sb(e,l,!1,c);B(k.ga,f)===g&&d(a?401==a?"permission_denied":"rest_error:"+a:"ok",null)})};h.Xe=function(a,b){var c=ne(a,b);delete this.ga[c]};
h.ke=function(a,b){var c;this.Fa=a;c={};var d={};try{var e=a.split("."),f=db(e[0])||"",g=db(e[1])||"";sa(f);c=sa(g);d=c.d||{};delete c.d}catch(k){console.warn("error",k)}c=c&&c.exp;b&&b("ok",{auth:d,expires:c})};h.We=function(a){this.Fa=null;a("ok",null)};h.Wd=function(){};h.Ee=function(){};h.cd=function(){};h.put=function(){};h.Be=function(){};h.Zd=function(){};
function pe(a,b,c,d){c=c||{};c.format="export";a.Fa&&(c.auth=a.Fa);var e=(a.I.od?"https://":"http://")+a.I.host+b+"?"+nc(c);a.m("Sending REST request for "+e);var f=new XMLHttpRequest;f.onreadystatechange=function(){if(d&&4===f.readyState){a.m("REST Response for "+e+" received. status:",f.status,"response:",f.responseText);var b=null;if(200<=f.status&&300>f.status){try{b=sa(f.responseText)}catch(k){y("Failed to parse JSON response for "+e+": "+f.responseText)}d(null,b)}else 401!==f.status&&404!==
f.status&&y("Got unsuccessful REST response for "+e+" Status: "+f.status),d(f.status);d=null}};f.open("GET",e,!0);f.send()};function qe(){this.nd=N}qe.prototype.j=function(a){return this.nd.oa(a)};qe.prototype.toString=function(){return this.nd.toString()};function re(){this.set={}}h=re.prototype;h.add=function(a,b){this.set[a]=null!==b?b:!0};h.contains=function(a){return A(this.set,a)};h.get=function(a){return this.contains(a)?this.set[a]:void 0};h.remove=function(a){delete this.set[a]};h.clear=function(){this.set={}};h.f=function(){return Va(this.set)};h.count=function(){return Na(this.set)};function se(a,b){v(a.set,function(a,d){b(d,a)})}h.keys=function(){var a=[];v(this.set,function(b,c){a.push(c)});return a};function te(){this.u=this.G=null}te.prototype.find=function(a){if(null!=this.G)return this.G.oa(a);if(a.f()||null==this.u)return null;var b=G(a);a=H(a);return this.u.contains(b)?this.u.get(b).find(a):null};function ue(a,b,c){if(b.f())a.G=c,a.u=null;else if(null!==a.G)a.G=a.G.J(b,c);else{null==a.u&&(a.u=new re);var d=G(b);a.u.contains(d)||a.u.add(d,new te);a=a.u.get(d);b=H(b);ue(a,b,c)}}
function ve(a,b){if(b.f())return a.G=null,a.u=null,!0;if(null!==a.G){if(a.G.P())return!1;var c=a.G;a.G=null;c.V(O,function(b,c){ue(a,new E(b),c)});return ve(a,b)}return null!==a.u?(c=G(b),b=H(b),a.u.contains(c)&&ve(a.u.get(c),b)&&a.u.remove(c),a.u.f()?(a.u=null,!0):!1):!0}function we(a,b,c){null!==a.G?c(b,a.G):a.V(function(a,e){var d=new E(b.toString()+"/"+a);we(e,d,c)})}te.prototype.V=function(a){null!==this.u&&se(this.u,function(b,c){a(b,c)})};function xe(a,b){this.type=ye;this.source=ze;this.path=a;this.$d=b}xe.prototype.yc=function(){return this.path.f()?this:new xe(H(this.path),this.$d)};xe.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.$d+")"};function Ae(a,b,c){this.type=Be;this.source=a;this.path=b;this.children=c}Ae.prototype.yc=function(a){if(this.path.f())return a=this.children.subtree(new E(a)),a.f()?null:a.value?new Ce(this.source,I,a.value):new Ae(this.source,I,a);x(G(this.path)===a,"Can't get a merge for a child not on the path of the operation");return new Ae(this.source,H(this.path),this.children)};Ae.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"};function Ce(a,b,c){this.type=De;this.source=a;this.path=b;this.Ia=c}Ce.prototype.yc=function(a){return this.path.f()?new Ce(this.source,I,this.Ia.O(a)):new Ce(this.source,H(this.path),this.Ia)};Ce.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Ia.toString()+")"};function Ee(a,b){this.type=Fe;this.source=a;this.path=b}Ee.prototype.yc=function(){return this.path.f()?new Ee(this.source,I):new Ee(this.source,H(this.path))};Ee.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"};var De=0,Be=1,ye=2,Fe=3;function Ge(a,b,c,d){this.Kd=a;this.te=b;this.ub=c;this.fe=d;x(!d||b,"Tagged queries must be from server.")}var ze=new Ge(!0,!1,null,!1),He=new Ge(!1,!0,null,!1);Ge.prototype.toString=function(){return this.Kd?"user":this.fe?"server(queryID="+this.ub+")":"server"};function T(a,b){this.value=a;this.children=b||Ie}var Ie=new nd(function(a,b){return a===b?0:a<b?-1:1});function Je(a){var b=Ke;v(a,function(a,d){b=b.set(new E(d),a)});return b}h=T.prototype;h.f=function(){return null===this.value&&this.children.f()};function Le(a,b,c){if(null!=a.value&&c(a.value))return{path:I,value:a.value};if(b.f())return null;var d=G(b);a=a.children.get(d);return null!==a?(b=Le(a,H(b),c),null!=b?{path:(new E(d)).o(b.path),value:b.value}:null):null}
function Me(a,b){return Le(a,b,function(){return!0})}h.subtree=function(a){if(a.f())return this;var b=this.children.get(G(a));return null!==b?b.subtree(H(a)):Ke};h.set=function(a,b){if(a.f())return new T(b,this.children);var c=G(a),d=(this.children.get(c)||Ke).set(H(a),b),c=this.children.Na(c,d);return new T(this.value,c)};
h.remove=function(a){if(a.f())return this.children.f()?Ke:new T(null,this.children);var b=G(a),c=this.children.get(b);return c?(a=c.remove(H(a)),b=a.f()?this.children.remove(b):this.children.Na(b,a),null===this.value&&b.f()?Ke:new T(this.value,b)):this};h.get=function(a){if(a.f())return this.value;var b=this.children.get(G(a));return b?b.get(H(a)):null};
function Ne(a,b,c){if(b.f())return c;var d=G(b);b=Ne(a.children.get(d)||Ke,H(b),c);d=b.f()?a.children.remove(d):a.children.Na(d,b);return new T(a.value,d)}function Oe(a,b){return Pe(a,I,b)}function Pe(a,b,c){var d={};a.children.ja(function(a,f){d[a]=Pe(f,b.o(a),c)});return c(b,a.value,d)}function Qe(a,b,c){return Re(a,b,I,c)}function Re(a,b,c,d){var e=a.value?d(c,a.value):!1;if(e)return e;if(b.f())return null;e=G(b);return(a=a.children.get(e))?Re(a,H(b),c.o(e),d):null}
function Se(a,b,c){if(!b.f()){var d=!0;a.value&&(d=c(I,a.value));!0===d&&(d=G(b),(a=a.children.get(d))&&Te(a,H(b),I.o(d),c))}}function Te(a,b,c,d){if(b.f())return a;a.value&&d(c,a.value);var e=G(b);return(a=a.children.get(e))?Te(a,H(b),c.o(e),d):Ke}function Ue(a,b){Ve(a,I,b)}function Ve(a,b,c){a.children.ja(function(a,e){Ve(e,b.o(a),c)});a.value&&c(b,a.value)}function We(a,b){a.children.ja(function(a,d){d.value&&b(a,d.value)})}var Ke=new T(null);
T.prototype.toString=function(){var a={};Ue(this,function(b,c){a[b.toString()]=c.toString()});return u(a)};function Xe(a,b,c){this.F=a;this.L=b;this.Eb=c}function Ye(a,b){return a.L&&!a.Eb||a.F.Ha(b)}Xe.prototype.j=function(){return this.F};function Ze(a,b){this.H=a;this.pd=b}function $e(a,b,c,d){return new Ze(new Xe(b,c,d),a.pd)}function af(a){return a.H.L?a.H.j():null}Ze.prototype.B=function(){return this.pd};function bf(a){return a.pd.L?a.pd.j():null};function V(a,b,c,d){this.type=a;this.Ja=b;this.Ua=c;this.Vd=d;this.hd=void 0};function cf(a,b,c,d){this.Hd=b;this.qd=c;this.hd=d;this.Mc=a}cf.prototype.Kb=function(){var a=this.qd.Xb();return"value"===this.Mc?a.path:a.parent().path};cf.prototype.Md=function(){return this.Mc};cf.prototype.Fb=function(){return this.Hd.Fb(this)};cf.prototype.toString=function(){return this.Kb().toString()+":"+this.Mc+":"+u(this.qd.re())};function df(a,b,c){this.Hd=a;this.error=b;this.path=c}df.prototype.Kb=function(){return this.path};df.prototype.Md=function(){return"cancel"};
df.prototype.Fb=function(){return this.Hd.Fb(this)};df.prototype.toString=function(){return this.path.toString()+":cancel"};function ef(a,b,c){this.Bb=a;this.jb=b;this.kb=c||null}h=ef.prototype;h.Qe=function(a){return"value"===a};h.createEvent=function(a,b){var c=b.A.g;return new cf("value",this,new R(a.Ja,b.Xb(),c))};h.Fb=function(a){var b=this.kb;if("cancel"===a.Md()){x(this.jb,"Raising a cancel event on a listener with no cancel callback");var c=this.jb;return function(){c.call(b,a.error)}}var d=this.Bb;return function(){d.call(b,a.qd)}};h.le=function(a,b){return this.jb?new df(this,a,b):null};
h.matches=function(a){return a instanceof ef?a.Bb&&this.Bb?a.Bb===this.Bb&&a.kb===this.kb:!0:!1};h.xe=function(){return null!==this.Bb};function ff(a,b,c){this.ia=a;this.jb=b;this.kb=c}h=ff.prototype;h.Qe=function(a){a="children_added"===a?"child_added":a;return Ra(this.ia,"children_removed"===a?"child_removed":a)};h.le=function(a,b){return this.jb?new df(this,a,b):null};
h.createEvent=function(a,b){x(null!=a.Ua,"Child events should have a childName.");var c=b.Xb().o(a.Ua);return new cf(a.type,this,new R(a.Ja,c,b.A.g),a.hd)};h.Fb=function(a){var b=this.kb;if("cancel"===a.Md()){x(this.jb,"Raising a cancel event on a listener with no cancel callback");var c=this.jb;return function(){c.call(b,a.error)}}var d=this.ia[a.Mc];return function(){d.call(b,a.qd,a.hd)}};
h.matches=function(a){if(a instanceof ff){if(!this.ia||!a.ia)return!0;if(this.kb===a.kb){var b=Na(a.ia);if(b===Na(this.ia)){if(1===b){var b=Oa(a.ia),c=Oa(this.ia);return c===b&&(!a.ia[b]||!this.ia[c]||a.ia[b]===this.ia[c])}return Ma(this.ia,function(b,c){return a.ia[c]===b})}}}return!1};h.xe=function(){return null!==this.ia};function gf(a){this.W=a;this.g=a.A.g}function hf(a,b,c,d){var e=[],f=[];ya(b,function(b){"child_changed"===b.type&&a.g.Tc(b.Vd,b.Ja)&&f.push(new V("child_moved",b.Ja,b.Ua))});jf(a,e,"child_removed",b,d,c);jf(a,e,"child_added",b,d,c);jf(a,e,"child_moved",f,d,c);jf(a,e,"child_changed",b,d,c);jf(a,e,"value",b,d,c);return e}function jf(a,b,c,d,e,f){d=za(d,function(a){return a.type===c});Ga(d,r(a.kf,a));ya(d,function(c){var d=kf(a,c,f);ya(e,function(e){e.Qe(c.type)&&b.push(e.createEvent(d,a.W))})})}
function kf(a,b,c){"value"!==b.type&&"child_removed"!==b.type&&(b.hd=c.ve(b.Ua,b.Ja,a.g));return b}gf.prototype.kf=function(a,b){if(null==a.Ua||null==b.Ua)throw cb("Should only compare child_ events.");return this.g.compare(new L(a.Ua,a.Ja),new L(b.Ua,b.Ja))};function lf(){}lf.prototype.ue=function(){return null};lf.prototype.Ld=function(){return null};var mf=new lf;function nf(a,b,c){this.Ye=a;this.Ka=b;this.ed=c}nf.prototype.ue=function(a){var b=this.Ka.H;if(Ye(b,a))return b.j().O(a);b=null!=this.ed?new Xe(this.ed,!0,!1):this.Ka.B();return this.Ye.Ta(a,b)};nf.prototype.Ld=function(a,b,c){var d=null!=this.ed?this.ed:bf(this.Ka);a=this.Ye.Fd(d,b,1,c,a);return 0===a.length?null:a[0]};function of(a,b){this.zd=a;this.hf=b}function pf(a){this.K=a}
pf.prototype.Za=function(a,b,c,d){var e=new qf,f;if(b.type===De)b.source.Kd?c=rf(this,a,b.path,b.Ia,c,d,e):(x(b.source.te,"Unknown source."),f=b.source.fe,c=sf(this,a,b.path,b.Ia,c,d,f,e));else if(b.type===Be)b.source.Kd?c=tf(this,a,b.path,b.children,c,d,e):(x(b.source.te,"Unknown source."),f=b.source.fe,c=uf(this,a,b.path,b.children,c,d,f,e));else if(b.type===ye)if(b.$d)if(f=b.path,null!=c.Yb(f))c=a;else{b=new nf(c,a,d);d=a.H.j();if(f.f()||".priority"===G(f))a.B().L?b=c.va(bf(a)):(b=a.B().j(),x(b instanceof
Q,"serverChildren would be complete if leaf node"),b=c.cc(b)),b=this.K.ua(d,b,e);else{f=G(f);var g=c.Ta(f,a.B());null==g&&Ye(a.B(),f)&&(g=d.O(f));b=null!=g?this.K.J(d,f,g,b,e):a.H.j().Ha(f)?this.K.J(d,f,N,b,e):d;b.f()&&a.B().L&&(d=c.va(bf(a)),d.P()&&(b=this.K.ua(b,d,e)))}d=a.B().L||null!=c.Yb(I);c=$e(a,b,d,this.K.Ga())}else c=vf(this,a,b.path,c,d,e);else if(b.type===Fe)d=b.path,b=a.B(),f=b.j(),g=b.L||d.f(),c=wf(this,new Ze(a.H,new Xe(f,g,b.Eb)),d,c,mf,e);else throw cb("Unknown operation type: "+b.type);
e=Pa(e.cb);d=c;b=d.H;b.L&&(f=b.j().P()||b.j().f(),g=af(a),(0<e.length||!a.H.L||f&&!b.j().aa(g)||!b.j().D().aa(g.D()))&&e.push(new V("value",af(d))));return new of(c,e)};
function wf(a,b,c,d,e,f){var g=b.H;if(null!=d.Yb(c))return b;var k;if(c.f())x(b.B().L,"If change path is empty, we must have complete server data"),b.B().Eb?(e=bf(b),d=d.cc(e instanceof Q?e:N)):d=d.va(bf(b)),f=a.K.ua(b.H.j(),d,f);else{var l=G(c);if(".priority"==l)x(1==vc(c),"Can't have a priority with additional path components"),f=g.j(),k=b.B().j(),d=d.Fc(c,f,k),f=null!=d?a.K.da(f,d):g.j();else{var m=H(c);Ye(g,l)?(k=b.B().j(),d=d.Fc(c,g.j(),k),d=null!=d?g.j().O(l).J(m,d):g.j().O(l)):d=d.Ta(l,b.B());
f=null!=d?a.K.J(g.j(),l,d,e,f):g.j()}}return $e(b,f,g.L||c.f(),a.K.Ga())}function sf(a,b,c,d,e,f,g,k){var l=b.B();g=g?a.K:a.K.Gb();if(c.f())d=g.ua(l.j(),d,null);else if(g.Ga()&&!l.Eb)d=l.j().J(c,d),d=g.ua(l.j(),d,null);else{var m=G(c);if((c.f()?!l.L||l.Eb:!Ye(l,G(c)))&&1<vc(c))return b;d=l.j().O(m).J(H(c),d);d=".priority"==m?g.da(l.j(),d):g.J(l.j(),m,d,mf,null)}l=l.L||c.f();b=new Ze(b.H,new Xe(d,l,g.Ga()));return wf(a,b,c,e,new nf(e,b,f),k)}
function rf(a,b,c,d,e,f,g){var k=b.H;e=new nf(e,b,f);if(c.f())g=a.K.ua(b.H.j(),d,g),a=$e(b,g,!0,a.K.Ga());else if(f=G(c),".priority"===f)g=a.K.da(b.H.j(),d),a=$e(b,g,k.L,k.Eb);else{var l=H(c);c=k.j().O(f);if(!l.f()){var m=e.ue(f);d=null!=m?".priority"===wc(l)&&m.oa(l.parent()).f()?m:m.J(l,d):N}c.aa(d)?a=b:(g=a.K.J(k.j(),f,d,e,g),a=$e(b,g,k.L,a.K.Ga()))}return a}
function tf(a,b,c,d,e,f,g){var k=b;Ue(d,function(d,m){var l=c.o(d);Ye(b.H,G(l))&&(k=rf(a,k,l,m,e,f,g))});Ue(d,function(d,m){var l=c.o(d);Ye(b.H,G(l))||(k=rf(a,k,l,m,e,f,g))});return k}function xf(a,b){Ue(b,function(b,d){a=a.J(b,d)});return a}
function uf(a,b,c,d,e,f,g,k){if(b.B().j().f()&&!b.B().L)return b;var l=b;c=c.f()?d:Ne(Ke,c,d);var m=b.B().j();c.children.ja(function(c,d){if(m.Ha(c)){var w=b.B().j().O(c),w=xf(w,d);l=sf(a,l,new E(c),w,e,f,g,k)}});c.children.ja(function(c,d){var w=!b.B().L&&null==d.value;m.Ha(c)||w||(w=b.B().j().O(c),w=xf(w,d),l=sf(a,l,new E(c),w,e,f,g,k))});return l}
function vf(a,b,c,d,e,f){if(null!=d.Yb(c))return b;var g=new nf(d,b,e),k=e=b.H.j();if(b.B().L){if(c.f())e=d.va(bf(b)),k=a.K.ua(b.H.j(),e,f);else if(".priority"===G(c)){var l=d.Ta(G(c),b.B());null==l||e.f()||e.D().aa(l)||(k=a.K.da(e,l))}else l=G(c),e=d.Ta(l,b.B()),null!=e&&(k=a.K.J(b.H.j(),l,e,g,f));e=!0}else if(b.H.L||c.f())k=e,e=b.H.j(),e.P()||e.V(O,function(c){var e=d.Ta(c,b.B());null!=e&&(k=a.K.J(k,c,e,g,f))}),e=b.H.L;else{l=G(c);if(1==vc(c)||Ye(b.H,l))c=d.Ta(l,b.B()),null!=c&&(k=a.K.J(e,l,c,g,
f));e=!1}return $e(b,k,e,a.K.Ga())};function yf(a,b){this.W=a;var c=a.A,d=new zf(c.g),c=S(c)?new zf(c.g):c.ka?new Af(c):new Bf(c);this.Me=new pf(c);var e=b.B(),f=b.H,g=d.ua(N,e.j(),null),k=c.ua(N,f.j(),null);this.Ka=new Ze(new Xe(k,f.L,c.Ga()),new Xe(g,e.L,d.Ga()));this.Va=[];this.pf=new gf(a)}h=yf.prototype;h.B=function(){return this.Ka.B().j()};h.fb=function(a){var b=bf(this.Ka);return b&&(S(this.W.A)||!a.f()&&!b.O(G(a)).f())?b.oa(a):null};h.f=function(){return 0===this.Va.length};h.zb=function(a){this.Va.push(a)};
h.gb=function(a,b){var c=[];if(b){x(null==a,"A cancel should cancel all event registrations.");var d=this.W.path;ya(this.Va,function(a){(a=a.le(b,d))&&c.push(a)})}if(a){for(var e=[],f=0;f<this.Va.length;++f){var g=this.Va[f];if(!g.matches(a))e.push(g);else if(a.xe()){e=e.concat(this.Va.slice(f+1));break}}this.Va=e}else this.Va=[];return c};
h.Za=function(a,b,c){a.type===Be&&null!==a.source.ub&&(x(bf(this.Ka),"We should always have a full cache before handling merges"),x(af(this.Ka),"Missing event cache, even though we have a server cache"));var d=this.Ka;a=this.Me.Za(d,a,b,c);b=this.Me;c=a.zd;x(c.H.j().lc(b.K.g),"Event snap not indexed");x(c.B().j().lc(b.K.g),"Server snap not indexed");x(a.zd.B().L||!d.B().L,"Once a server snap is complete, it should never go back");this.Ka=a.zd;return Cf(this,a.hf,a.zd.H.j(),null)};
function Df(a,b){var c=a.Ka.H,d=[];c.j().P()||c.j().V(O,function(a,b){d.push(new V("child_added",b,a))});c.L&&d.push(new V("value",c.j()));return Cf(a,d,c.j(),b)}function Cf(a,b,c,d){return hf(a.pf,b,c,d?[d]:a.Va)};function Ef(){this.za={}}h=Ef.prototype;h.f=function(){return Va(this.za)};h.Za=function(a,b,c){var d=a.source.ub;if(null!==d)return d=B(this.za,d),x(null!=d,"SyncTree gave us an op for an invalid query."),d.Za(a,b,c);var e=[];v(this.za,function(d){e=e.concat(d.Za(a,b,c))});return e};h.zb=function(a,b,c,d,e){var f=ae(a),g=B(this.za,f);g||((g=c.va(e?d:null))?c=!0:(g=d instanceof Q?c.cc(d):N,c=!1),g=new yf(a,new Ze(new Xe(g,c,!1),new Xe(d,e,!1))),this.za[f]=g);g.zb(b);return Df(g,b)};
h.gb=function(a,b,c){var d=ae(a),e=[],f=[],g=null!=Ff(this);if("default"===d){var k=this;v(this.za,function(a,d){f=f.concat(a.gb(b,c));a.f()&&(delete k.za[d],S(a.W.A)||e.push(a.W))})}else{var l=B(this.za,d);l&&(f=f.concat(l.gb(b,c)),l.f()&&(delete this.za[d],S(l.W.A)||e.push(l.W)))}g&&null==Ff(this)&&e.push(new W(a.C.Sa,a.C,a.path));return{Kf:e,qf:f}};function Gf(a){return za(Pa(a.za),function(a){return!S(a.W.A)})}h.fb=function(a){var b=null;v(this.za,function(c){b=b||c.fb(a)});return b};
function Hf(a,b){if(S(b.A))return Ff(a);var c=ae(b);return B(a.za,c)}function Ff(a){return Ua(a.za,function(a){return S(a.W.A)})||null};function If(a){this.Y=a}var Jf=new If(new T(null));function Kf(a,b,c){if(b.f())return new If(new T(c));var d=Me(a.Y,b);if(null!=d){var e=d.path,d=d.value;b=F(e,b);d=d.J(b,c);return new If(a.Y.set(e,d))}a=Ne(a.Y,b,new T(c));return new If(a)}function Lf(a,b,c){var d=a;ic(c,function(a,c){d=Kf(d,b.o(a),c)});return d}If.prototype.jd=function(a){if(a.f())return Jf;a=Ne(this.Y,a,Ke);return new If(a)};function Mf(a,b){var c=Me(a.Y,b);return null!=c?a.Y.get(c.path).oa(F(c.path,b)):null}
function Nf(a){var b=[],c=a.Y.value;null!=c?c.P()||c.V(O,function(a,c){b.push(new L(a,c))}):a.Y.children.ja(function(a,c){null!=c.value&&b.push(new L(a,c.value))});return b}function Of(a,b){if(b.f())return a;var c=Mf(a,b);return null!=c?new If(new T(c)):new If(a.Y.subtree(b))}If.prototype.f=function(){return this.Y.f()};If.prototype.apply=function(a){return Pf(I,this.Y,a)};
function Pf(a,b,c){if(null!=b.value)return c.J(a,b.value);var d=null;b.children.ja(function(b,f){".priority"===b?(x(null!==f.value,"Priority writes must always be leaf nodes"),d=f.value):c=Pf(a.o(b),f,c)});c.oa(a).f()||null===d||(c=c.J(a.o(".priority"),d));return c};function Qf(){this.U=Jf;this.Aa=[];this.nc=-1}h=Qf.prototype;
h.jd=function(a){var b=Ea(this.Aa,function(b){return b.Bd===a});x(0<=b,"removeWrite called with nonexistent writeId.");var c=this.Aa[b];this.Aa.splice(b,1);for(var d=c.visible,e=!1,f=this.Aa.length-1;d&&0<=f;){var g=this.Aa[f];g.visible&&(f>=b&&Rf(g,c.path)?d=!1:c.path.contains(g.path)&&(e=!0));f--}if(d){if(e)this.U=Sf(this.Aa,Tf,I),this.nc=0<this.Aa.length?this.Aa[this.Aa.length-1].Bd:-1;else if(c.Ia)this.U=this.U.jd(c.path);else{var k=this;v(c.children,function(a,b){k.U=k.U.jd(c.path.o(b))})}return c.path}return null};
h.va=function(a,b,c,d){if(c||d){var e=Of(this.U,a);return!d&&e.f()?b:d||null!=b||null!=Mf(e,I)?(e=Sf(this.Aa,function(b){return(b.visible||d)&&(!c||!(0<=xa(c,b.Bd)))&&(b.path.contains(a)||a.contains(b.path))},a),b=b||N,e.apply(b)):null}e=Mf(this.U,a);if(null!=e)return e;e=Of(this.U,a);return e.f()?b:null!=b||null!=Mf(e,I)?(b=b||N,e.apply(b)):null};
h.cc=function(a,b){var c=N,d=Mf(this.U,a);if(d)d.P()||d.V(O,function(a,b){c=c.S(a,b)});else if(b){var e=Of(this.U,a);b.V(O,function(a,b){var d=Of(e,new E(a)).apply(b);c=c.S(a,d)});ya(Nf(e),function(a){c=c.S(a.name,a.node)})}else e=Of(this.U,a),ya(Nf(e),function(a){c=c.S(a.name,a.node)});return c};h.Fc=function(a,b,c,d){x(c||d,"Either existingEventSnap or existingServerSnap must exist");a=a.o(b);if(null!=Mf(this.U,a))return null;a=Of(this.U,a);return a.f()?d.oa(b):a.apply(d.oa(b))};
h.Ta=function(a,b,c){a=a.o(b);var d=Mf(this.U,a);return null!=d?d:Ye(c,b)?Of(this.U,a).apply(c.j().O(b)):null};h.Yb=function(a){return Mf(this.U,a)};h.Fd=function(a,b,c,d,e,f){var g;a=Of(this.U,a);g=Mf(a,I);if(null==g)if(null!=b)g=a.apply(b);else return[];g=g.ib(f);if(g.f()||g.P())return[];b=[];a=Uc(f);e=e?g.Lb(c,f):g.Jb(c,f);for(f=P(e);f&&b.length<d;)0!==a(f,c)&&b.push(f),f=P(e);return b};
function Rf(a,b){return a.Ia?a.path.contains(b):!!Ta(a.children,function(c,d){return a.path.o(d).contains(b)})}function Tf(a){return a.visible}
function Sf(a,b,c){for(var d=Jf,e=0;e<a.length;++e){var f=a[e];if(b(f)){var g=f.path;if(f.Ia)c.contains(g)?(g=F(c,g),d=Kf(d,g,f.Ia)):g.contains(c)&&(g=F(g,c),d=Kf(d,I,f.Ia.oa(g)));else if(f.children)if(c.contains(g))g=F(c,g),d=Lf(d,g,f.children);else{if(g.contains(c))if(g=F(g,c),g.f())d=Lf(d,I,f.children);else if(f=B(f.children,G(g)))f=f.oa(H(g)),d=Kf(d,I,f)}else throw cb("WriteRecord should have .snap or .children");}}return d}function Uf(a,b){this.xb=a;this.Y=b}h=Uf.prototype;
h.va=function(a,b,c){return this.Y.va(this.xb,a,b,c)};h.cc=function(a){return this.Y.cc(this.xb,a)};h.Fc=function(a,b,c){return this.Y.Fc(this.xb,a,b,c)};h.Yb=function(a){return this.Y.Yb(this.xb.o(a))};h.Fd=function(a,b,c,d,e){return this.Y.Fd(this.xb,a,b,c,d,e)};h.Ta=function(a,b){return this.Y.Ta(this.xb,a,b)};h.o=function(a){return new Uf(this.xb.o(a),this.Y)};function Vf(a){this.ta=Ke;this.tb=new Qf;this.ee={};this.Wb={};this.oc=a}function Wf(a,b,c,d,e){var f=a.tb,g=e;x(d>f.nc,"Stacking an older write on top of newer ones");p(g)||(g=!0);f.Aa.push({path:b,Ia:c,Bd:d,visible:g});g&&(f.U=Kf(f.U,b,c));f.nc=d;return e?Xf(a,new Ce(ze,b,c)):[]}function Yf(a,b,c,d){var e=a.tb;x(d>e.nc,"Stacking an older merge on top of newer ones");e.Aa.push({path:b,children:c,Bd:d,visible:!0});e.U=Lf(e.U,b,c);e.nc=d;c=Je(c);return Xf(a,new Ae(ze,b,c))}
function Zf(a,b,c){c=c||!1;b=a.tb.jd(b);return null==b?[]:Xf(a,new xe(b,c))}function $f(a,b,c){c=Je(c);return Xf(a,new Ae(He,b,c))}function ag(a,b,c,d){d=bg(a,d);if(null!=d){var e=cg(d);d=e.path;e=e.ub;b=F(d,b);c=new Ce(new Ge(!1,!0,e,!0),b,c);return dg(a,d,c)}return[]}function eg(a,b,c,d){if(d=bg(a,d)){var e=cg(d);d=e.path;e=e.ub;b=F(d,b);c=Je(c);c=new Ae(new Ge(!1,!0,e,!0),b,c);return dg(a,d,c)}return[]}
Vf.prototype.zb=function(a,b){var c=a.path,d=null,e=!1;Se(this.ta,c,function(a,b){var f=F(a,c);d=b.fb(f);e=e||null!=Ff(b);return!d});var f=this.ta.get(c);f?(e=e||null!=Ff(f),d=d||f.fb(I)):(f=new Ef,this.ta=this.ta.set(c,f));var g;null!=d?g=!0:(g=!1,d=N,We(this.ta.subtree(c),function(a,b){var c=b.fb(I);c&&(d=d.S(a,c))}));var k=null!=Hf(f,a);if(!k&&!S(a.A)){var l=fg(a);x(!Ra(this.Wb,l),"View does not exist, but we have a tag");var m=gg++;this.Wb[l]=m;this.ee["_"+m]=l}g=f.zb(a,b,new Uf(c,this.tb),d,
g);k||e||(f=Hf(f,a),g=g.concat(hg(this,a,f)));return g};
Vf.prototype.gb=function(a,b,c){var d=a.path,e=this.ta.get(d),f=[];if(e&&("default"===ae(a)||null!=Hf(e,a))){f=e.gb(a,b,c);e.f()&&(this.ta=this.ta.remove(d));e=f.Kf;f=f.qf;b=-1!==Ea(e,function(a){return S(a.A)});var g=Qe(this.ta,d,function(a,b){return null!=Ff(b)});if(b&&!g&&(d=this.ta.subtree(d),!d.f()))for(var d=ig(d),k=0;k<d.length;++k){var l=d[k],m=l.W,l=jg(this,l);this.oc.be(m,kg(this,m),l.Qc,l.M)}if(!g&&0<e.length&&!c)if(b)this.oc.ud(a,null);else{var J=this;ya(e,function(a){ae(a);var b=J.Wb[fg(a)];
J.oc.ud(a,b)})}lg(this,e)}return f};Vf.prototype.va=function(a,b){var c=this.tb,d=Qe(this.ta,a,function(b,c){var d=F(b,a);if(d=c.fb(d))return d});return c.va(a,d,b,!0)};function ig(a){return Oe(a,function(a,c,d){if(c&&null!=Ff(c))return[Ff(c)];var b=[];c&&(b=Gf(c));v(d,function(a){b=b.concat(a)});return b})}function lg(a,b){for(var c=0;c<b.length;++c){var d=b[c];if(!S(d.A)){var d=fg(d),e=a.Wb[d];delete a.Wb[d];delete a.ee["_"+e]}}}
function hg(a,b,c){var d=b.path,e=kg(a,b);c=jg(a,c);b=a.oc.be(b,e,c.Qc,c.M);d=a.ta.subtree(d);if(e)x(null==Ff(d.value),"If we're adding a query, it shouldn't be shadowed");else for(e=Oe(d,function(a,b,c){if(!a.f()&&b&&null!=Ff(b))return[Ff(b).W];var d=[];b&&(d=d.concat(Aa(Gf(b),function(a){return a.W})));v(c,function(a){d=d.concat(a)});return d}),d=0;d<e.length;++d)c=e[d],a.oc.ud(c,kg(a,c));return b}
function jg(a,b){var c=b.W,d=kg(a,c);return{Qc:function(){return(b.B()||N).hash()},M:function(b){if("ok"===b){if(d){var e=c.path;if(b=bg(a,d)){var g=cg(b);b=g.path;g=g.ub;e=F(b,e);e=new Ee(new Ge(!1,!0,g,!0),e);b=dg(a,b,e)}else b=[]}else b=Xf(a,new Ee(He,c.path));return b}switch(b){case "too_big":e="The data requested exceeds the maximum size,that can be accessed with a single request.";break;case "limits_exceeded":e="The request is refused by server side because of the resource limit of your APP plan.";
break;case "permission_denied":e="Client doesn't have permission to access the desired data.";break;case "unavailable":e="The service is unavailable";break;default:e="Unknown error."}e=Error(b+": "+e);e.code=b.toUpperCase();return a.gb(c,null,e)}}}function fg(a){return a.path.toString()+"$"+ae(a)}function cg(a){var b=a.indexOf("$");x(-1!==b&&b<a.length-1,"Bad queryKey.");return{ub:a.substr(b+1),path:new E(a.substr(0,b))}}function bg(a,b){var c=a.ee,d="_"+b;return null!==c&&d in c?c[d]:void 0}
function kg(a,b){var c=fg(b);return B(a.Wb,c)}var gg=1;function dg(a,b,c){var d=a.ta.get(b);x(d,"Missing sync point for query tag that we're tracking");return d.Za(c,new Uf(b,a.tb),null)}function Xf(a,b){return mg(a,b,a.ta,null,new Uf(I,a.tb))}function mg(a,b,c,d,e){if(b.path.f())return ng(a,b,c,d,e);var f=c.get(I);null==d&&null!=f&&(d=f.fb(I));var g=[],k=G(b.path),l=b.yc(k);if((c=c.children.get(k))&&l)var m=d?d.O(k):null,k=e.o(k),g=g.concat(mg(a,l,c,m,k));f&&(g=g.concat(f.Za(b,e,d)));return g}
function ng(a,b,c,d,e){var f=c.get(I);null==d&&null!=f&&(d=f.fb(I));var g=[];c.children.ja(function(c,f){var k=d?d.O(c):null,l=e.o(c),w=b.yc(c);w&&(g=g.concat(ng(a,w,f,k,l)))});f&&(g=g.concat(f.Za(b,e,d)));return g};function og(){this.fc={}}og.prototype.get=function(){return Wa(this.fc)};function pg(a){this.jf=a;this.Wc=null}pg.prototype.get=function(){var a=this.jf.get(),b=Wa(a);if(this.Wc)for(var c in this.Wc)b[c]-=this.Wc[c];this.Wc=a;return b};function qg(a,b){this.Ve={};this.sd=new pg(a);this.ha=b;var c=1E4+2E4*Math.random();setTimeout(r(this.Pe,this),Math.floor(c))}qg.prototype.Pe=function(){var a=this.sd.get(),b={},c=!1,d;for(d in a)0<a[d]&&A(this.Ve,d)&&(b[d]=a[d],c=!0);c&&this.ha.Zd(b);setTimeout(r(this.Pe,this),Math.floor(6E5*Math.random()))};var rg={},sg={};function tg(a){a=a.toString();rg[a]||(rg[a]=new og);return rg[a]}function ug(a,b){var c=a.toString();sg[c]||(sg[c]=b());return sg[c]};function vg(a,b){return a&&"object"===typeof a?(x(".sv"in a,"Unexpected leaf node or priority contents"),b[a[".sv"]]):a}function wg(a,b){var c=new te;we(a,new E(""),function(a,e){ue(c,a,xg(e,b))});return c}function xg(a,b){var c=a.D().N(),c=vg(c,b),d;if(a.P()){var e=vg(a.Ca(),b);return e!==a.Ca()||c!==a.D().N()?new Yc(e,M(c)):a}d=a;c!==a.D().N()&&(d=d.da(new Yc(c)));a.V(O,function(a,c){var e=xg(c,b);e!==c&&(d=d.S(a,e))});return d};function yg(){this.children={};this.Hc=0;this.value=null}function zg(a,b,c){this.$c=a?a:"";this.xa=b?b:null;this.F=c?c:new yg}function Ag(a,b){for(var c=b instanceof E?b:new E(b),d=a,e;null!==(e=G(c));)var f=B(d.F.children,e)||new yg,d=new zg(e,d,f),c=H(c);return d}h=zg.prototype;h.Ca=function(){return this.F.value};function Bg(a,b){x("undefined"!==typeof b,"Cannot set value to undefined");a.F.value=b;Cg(a)}h.clear=function(){this.F.value=null;this.F.children={};this.F.Hc=0;Cg(this)};
h.Pc=function(){return 0<this.F.Hc};h.f=function(){return null===this.Ca()&&!this.Pc()};h.V=function(a){var b=this;v(this.F.children,function(c,d){a(new zg(d,b,c))})};function Dg(a,b,c,d){c&&!d&&b(a);a.V(function(a){Dg(a,b,!0,d)});c&&d&&b(a)}function Eg(a,b){for(var c=a.parent();null!==c&&!b(c);)c=c.parent()}h.path=function(){return new E(null===this.xa?this.$c:this.xa.path()+"/"+this.$c)};h.name=function(){return this.$c};h.parent=function(){return this.xa};
function Cg(a){if(null!==a.xa){var b=a.xa,c=a.$c,d=a.f(),e=A(b.F.children,c);d&&e?(delete b.F.children[c],b.F.Hc--,Cg(b)):d||e||(b.F.children[c]=a.F,b.F.Hc++,Cg(b))}};function Fg(){this.lb=[]}function Gg(a,b){for(var c=null,d=0;d<b.length;d++){var e=b[d],f=e.Kb();null===c||f.aa(c.Kb())||(a.lb.push(c),c=null);null===c&&(c=new Hg(f));c.add(e)}c&&a.lb.push(c)}function Ig(a,b,c){Gg(a,c);Jg(a,function(a){return a.aa(b)})}function Kg(a,b,c){Gg(a,c);Jg(a,function(a){return a.contains(b)||b.contains(a)})}
function Jg(a,b){for(var c=!0,d=0;d<a.lb.length;d++){var e=a.lb[d];if(e)if(e=e.Kb(),b(e)){for(var e=a.lb[d],f=0;f<e.Nc.length;f++){var g=e.Nc[f];if(null!==g){e.Nc[f]=null;var k=g.Fb();hb&&eb("event: "+g.toString());ub(k)}}a.lb[d]=null}else c=!1}c&&(a.lb=[])}function Hg(a){this.qa=a;this.Nc=[]}Hg.prototype.add=function(a){this.Nc.push(a)};Hg.prototype.Kb=function(){return this.qa};function Lg(a,b,c){this.I=b;this.Sa=a;this.td=tg(b);this.ea=new Fg;this.ad=1;this.ha=this.Wa=null;c||0<=("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)?(this.ha=new me(this.I,r(this.sb,this)),setTimeout(r(this.uc,this,!0),0)):this.ha=this.Wa=new Xd(this.I,r(this.sb,this),r(this.uc,this),r(this.Xd,this));this.Qf=ug(b,r(function(){return new qg(this.td,this.ha)},this));this.Zb=
new zg;this.Pd=new qe;var d=this;this.Vc=new Vf({be:function(a,b,c,k){b=[];c=d.Pd.j(a.path);c.f()||(b=Xf(d.Vc,new Ce(He,a.path,c)),setTimeout(function(){k("ok")},0));return b},ud:aa});this.Sa.bind(this.Sa.ge.Ec,function(a){a&&a.signIn?d.ha.ke(a.idToken,function(){Mg(d,"authenticated",!0)},function(a,b){Ng(d,a,b)}):d.ha.We(function(a,b){Ng(d,a,b)})});Mg(this,"connected",!1);this.wa=new te;this.Lc=0;this.Qd=null;this.R=new Vf({be:function(a,b,c,k){d.ha.Ae(a,c,b,function(b,c){var e=k(b,c);Kg(d.ea,a.path,
e)});return[]},ud:function(a,b){d.ha.Xe(a,b)}})}function Ng(a,b,c){Mg(a,"authenticated",!1);"expired_token"==b&&a.Sa.emit(a.Sa.ge.ef,{status:b,reason:c})}h=Lg.prototype;h.toString=function(){return(this.I.od?"https://":"http://")+this.I.host};h.name=function(){return this.I.Ce};function Og(a){a=a.Pd.j(new E(".info/serverTimeOffset")).N()||0;return(new Date).getTime()+a}function Pg(a){a=a={timestamp:Og(a)};a.timestamp=a.timestamp||(new Date).getTime();return a}
h.sb=function(a,b,c,d){this.Lc++;var e=new E(a);b=this.Qd?this.Qd(a,b):b;a=[];d?c?(b=La(b,function(a){return M(a)}),a=eg(this.R,e,b,d)):(b=M(b),a=ag(this.R,e,b,d)):c?(d=La(b,function(a){return M(a)}),a=$f(this.R,e,d)):(d=M(b),a=Xf(this.R,new Ce(He,e,d)));d=e;0<a.length&&(d=Qg(this,e));Kg(this.ea,d,a)};h.uc=function(a){Mg(this,"connected",a);!1===a&&Rg(this)};h.Xd=function(a){var b=this;rb(a,function(a,d){Mg(b,d,a)})};
function Mg(a,b,c){b=new E("/.info/"+b);c=M(c);var d=a.Pd;d.nd=d.nd.J(b,c);c=Xf(a.Vc,new Ce(He,b,c));Kg(a.ea,b,c)}h.hb=function(a,b,c,d){this.m("set",{path:a.toString(),value:b,$f:c});var e=Pg(this);b=M(b,c);var e=xg(b,e),f=this.ad++,e=Wf(this.R,a,e,f,!0);Gg(this.ea,e);var g=this;this.ha.put(a.toString(),b.N(!0),function(b,c){var e="ok"===b;e||y("set at "+a+" failed: "+b);e=Zf(g.R,f,!e);Kg(g.ea,a,e);Sg(d,b,c)});e=Tg(this,a);Qg(this,e);Kg(this.ea,e,[])};
h.update=function(a,b,c){this.m("update",{path:a.toString(),value:b});var d=!0,e=Pg(this),f={};v(b,function(a,b){d=!1;var c=M(a);f[b]=xg(c,e)});if(d)eb("update() called with empty data.  Don't do anything."),Sg(c,"ok");else{var g=this.ad++,k=Yf(this.R,a,f,g);Gg(this.ea,k);var l=this;this.ha.Be(a.toString(),b,function(b,d){var e="ok"===b;e||y("update at "+a+" failed: "+b);var e=Zf(l.R,g,!e),f=a;0<e.length&&(f=Qg(l,a));Kg(l.ea,f,e);Sg(c,b,d)});b=Tg(this,a);Qg(this,b);Kg(this.ea,a,[])}};
function Rg(a){a.m("onDisconnectEvents");var b=Pg(a),c=[];we(wg(a.wa,b),I,function(b,e){c=c.concat(Xf(a.R,new Ce(He,b,e)));var d=Tg(a,b);Qg(a,d)});a.wa=new te;Kg(a.ea,I,c)}h.cd=function(a,b){var c=this;this.ha.cd(a.toString(),function(d,e){"ok"===d&&ve(c.wa,a);Sg(b,d,e)})};function Ug(a,b,c,d){var e=M(c);a.ha.Wd(b.toString(),e.N(!0),function(c,g){"ok"===c&&ue(a.wa,b,e);Sg(d,c,g)})}function Vg(a,b,c,d,e){var f=M(c,d);a.ha.Wd(b.toString(),f.N(!0),function(c,d){"ok"===c&&ue(a.wa,b,f);Sg(e,c,d)})}
function Wg(a,b,c,d){var e=!0,f;for(f in c)e=!1;e?(eb("onDisconnect().update() called with empty data.  Don't do anything."),Sg(d,"ok")):a.ha.Ee(b.toString(),c,function(e,f){if("ok"===e)for(var g in c)if(c.hasOwnProperty(g)){var k=M(c[g]);ue(a.wa,b.o(g),k)}Sg(d,e,f)})}function Xg(a,b,c){c=".info"===G(b.path)?a.Vc.zb(b,c):a.R.zb(b,c);Ig(a.ea,b.path,c)}h.jc=function(){this.Wa&&this.Wa.jc()};h.resume=function(){this.Wa&&this.Wa.resume()};
h.ce=function(a){if("undefined"!==typeof console){a?(this.sd||(this.sd=new pg(this.td)),a=this.sd.get()):a=this.td.get();var b=Ba(Qa(a),function(a,b){return Math.max(b.length,a)},0),c;for(c in a)if(a.hasOwnProperty(c)){for(var d=a[c],e=c.length;e<b+2;e++)c+=" ";console.log(c+d)}}};h.de=function(a){var b=this.td,c;p(c)||(c=1);A(b.fc,a)||(b.fc[a]=0);b.fc[a]+=c;this.Qf.Ve[a]=!0};h.m=function(a){var b="";this.Wa&&(b=this.Wa.id+":");eb(b,arguments)};
function Sg(a,b,c){a&&ub(function(){if("ok"==b)a(null);else{var d=(b||"error").toUpperCase(),e=d;c&&(e+=": "+c);e=Error(e);e.code=d;a(e)}})};function Yg(a,b,c,d,e){this.host=a.toLowerCase();this.domain=this.host.substr(this.host.indexOf(".")+1);this.od=b;this.Ce=c;this.Le=e||"";sc.rd?(this.Ue=!0,this.Da=sc.rd):(this.Da=mc.get("host:"+a)||this.host,this.Ue=!1);this.eb=JSON.parse(jb.get("failHosts"))||[]}function Wd(a,b){sc.rd||(null==b?(a.Da=a.host,"s-"===a.Da.substr(0,2)&&mc.remove("host:"+a.host)):b!==a.Da&&0<b.indexOf(".wilddogio.com")&&(a.Da=b,"s-"===a.Da.substr(0,2)&&mc.set("host:"+a.host,a.Da)))}
Yg.prototype.toString=function(){var a=(this.od?"https://":"http://")+this.host;this.Le&&(a+="<"+this.Le+">");return a};function Zg(a,b,c,d,e){function f(){}a.m("transaction on "+b);var g=new W(a.Sa,a,b);g.rb("value",f);c={path:b,update:c,M:d,status:null,order:bb(),je:e,Se:0,yd:function(){g.Sb("value",f)},Cd:null,Ba:null,Ic:null,Jc:null,Kc:null};d=a.R.va(b,void 0)||N;c.Ic=d;d=c.update(d.N());if(p(d)){Gc("transaction failed: Data returned ",d,c.path);c.status=1;e=Ag(a.Zb,b);var k=e.Ca()||[];k.push(c);Bg(e,k);"object"===typeof d&&null!==d&&A(d,".priority")?(k=B(d,".priority"),x(Ec(k),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):
k=(a.R.va(b)||N).D().N();e=Pg(a);d=M(d,k);e=xg(d,e);c.Jc=d;c.Kc=e;c.Ba=a.ad++;c=Wf(a.R,b,e,c.Ba,c.je);Kg(a.ea,b,c);$g(a)}else c.yd(),c.Jc=null,c.Kc=null,c.M&&(a=new R(c.Ic,new W(a.Sa,a,c.path),O),c.M(null,!1,a))}function $g(a,b){var c=b||a.Zb;b||ah(a,c);if(null!==c.Ca()){var d=bh(a,c);x(0<d.length,"Sending zero length transaction queue");Ca(d,function(a){return 1===a.status})&&ch(a,c.path(),d)}else c.Pc()&&c.V(function(b){$g(a,b)})}
function ch(a,b,c){for(var d=Aa(c,function(a){return a.Ba}),e=a.R.va(b,d)||N,d=e,e=e.hash(),f=0;f<c.length;f++){var g=c[f];x(1===g.status,"tryToSendTransactionQueue_: items in queue should all be run.");g.status=2;g.Se++;var k=F(b,g.path),d=d.J(k,g.Jc)}var d=d.N(!0),l=a.Sa;a.ha.put(b.toString(),d,function(d){a.m("transaction put response",{path:b.toString(),status:d});var e=[];if("ok"===d){d=[];for(f=0;f<c.length;f++){c[f].status=3;e=e.concat(Zf(a.R,c[f].Ba));if(c[f].M){var g=c[f].Kc,k=new W(l,a,
c[f].path);d.push(r(c[f].M,null,null,!0,new R(g,k,O)))}c[f].yd()}ah(a,Ag(a.Zb,b));$g(a);Kg(a.ea,b,e);for(f=0;f<d.length;f++)ub(d[f])}else{if("datastale"===d)for(f=0;f<c.length;f++)c[f].status=4===c[f].status?5:1;else for(y("transaction at "+b.toString()+" failed: "+d),f=0;f<c.length;f++)c[f].status=5,c[f].Cd=d;Qg(a,b)}},e)}function Qg(a,b){var c=dh(a,b),d=c.path(),c=bh(a,c);eh(a,c,d);return d}
function eh(a,b,c){if(0!==b.length){for(var d=[],e=[],f=Aa(b,function(a){return a.Ba}),g=0;g<b.length;g++){var k=b[g],l=F(c,k.path),m=!1,J;x(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null.");if(5===k.status)m=!0,J=k.Cd,e=e.concat(Zf(a.R,k.Ba,!0));else if(1===k.status)if(25<=k.Se)m=!0,J="maxretry",e=e.concat(Zf(a.R,k.Ba,!0));else{var w=a.R.va(k.path,f)||N;k.Ic=w;var U=b[g].update(w.N());p(U)?(Gc("transaction failed: Data returned ",U,k.path),l=M(U),"object"===typeof U&&null!=
U&&A(U,".priority")||(l=l.da(w.D())),w=k.Ba,U=Pg(a),U=xg(l,U),k.Jc=l,k.Kc=U,k.Ba=a.ad++,Fa(f,w),e=e.concat(Wf(a.R,k.path,U,k.Ba,k.je)),e=e.concat(Zf(a.R,w,!0))):(m=!0,J="nodata",e=e.concat(Zf(a.R,k.Ba,!0)))}Kg(a.ea,c,e);e=[];m&&(b[g].status=3,setTimeout(b[g].yd,Math.floor(0)),b[g].M&&("nodata"===J?(k=new W(a.Sa,a,b[g].path),d.push(r(b[g].M,null,null,!1,new R(b[g].Ic,k,O)))):d.push(r(b[g].M,null,Error(J),!1,null))))}ah(a,a.Zb);for(g=0;g<d.length;g++)ub(d[g]);$g(a)}}
function dh(a,b){for(var c,d=a.Zb;null!==(c=G(b))&&null===d.Ca();)d=Ag(d,c),b=H(b);return d}function bh(a,b){var c=[];fh(a,b,c);c.sort(function(a,b){return a.order-b.order});return c}function fh(a,b,c){var d=b.Ca();if(null!==d)for(var e=0;e<d.length;e++)c.push(d[e]);b.V(function(b){fh(a,b,c)})}function ah(a,b){var c=b.Ca();if(c){for(var d=0,e=0;e<c.length;e++)3!==c[e].status&&(c[d]=c[e],d++);c.length=d;Bg(b,0<c.length?c:null)}b.V(function(b){ah(a,b)})}
function Tg(a,b){var c=dh(a,b).path(),d=Ag(a.Zb,b);Eg(d,function(b){gh(a,b)});gh(a,d);Dg(d,function(b){gh(a,b)});return c}
function gh(a,b){var c=b.Ca();if(null!==c){for(var d=[],e=[],f=-1,g=0;g<c.length;g++)4!==c[g].status&&(2===c[g].status?(x(f===g-1,"All SENT items should be at beginning of queue."),f=g,c[g].status=4,c[g].Cd="set"):(x(1===c[g].status,"Unexpected transaction status in abort"),c[g].yd(),e=e.concat(Zf(a.R,c[g].Ba,!0)),c[g].M&&d.push(r(c[g].M,null,Error("set"),!1,null))));-1===f?Bg(b,null):c.length=f+1;Kg(a.ea,b.path(),e);for(g=0;g<d.length;g++)ub(d[g])}};function hh(){this.Ra={};this.Vf=!1}ba(hh);hh.prototype.jc=function(a){for(var b in this.Ra[a.name])this.Ra[a.name].hasOwnProperty(b)&&this.Ra[a.name][b].jc()};hh.prototype.resume=function(a){for(var b in this.Ra[a.name])this.Ra[a.name].hasOwnProperty(b)&&this.Ra[a.name][b].resume()};function ih(a){var b=this;this.bb=a;this.vd="*";rc()?this.sc=this.Sc=oc():(this.sc=window.opener,this.Sc=window);if(!b.sc)throw"Unable to find relay frame";pc(this.Sc,"message",r(this.dd,this));pc(this.Sc,"message",r(this.De,this));try{jh(this,{a:"ready"})}catch(c){pc(this.sc,"load",function(){jh(b,{a:"ready"})})}pc(window,"unload",r(this.Gf,this))}function jh(a,b){b=u(b);rc()?a.sc.doPost(b,a.vd):a.sc.postMessage(b,a.vd)}
ih.prototype.dd=function(a){var b=this,c;try{c=sa(a.data)}catch(d){}c&&"request"===c.a&&(qc(window,this.dd),this.vd=a.origin,this.bb&&setTimeout(function(){b.bb(b.vd,c.d,function(a,c){b.ff=!c;b.bb=void 0;jh(b,{a:"response",d:a,forceKeepWindowOpen:c})})},0))};ih.prototype.Gf=function(){try{qc(this.Sc,this.De)}catch(a){}this.bb&&(jh(this,{a:"error",d:"unknown closed window"}),this.bb=void 0);try{window.close()}catch(a){}};ih.prototype.De=function(a){if(this.ff&&"die"===a.data)try{window.close()}catch(b){}};var X={uf:function(){ra.Ne.Wf.tf();ra.Ne.Ze.Zf()}};X.forceLongPolling=X.uf;X.wf=function(){ra.Ne.Ze.tf()};X.forceWebSockets=X.wf;X.Pf=function(a,b){a.C.Wa.ae=b};X.setSecurityDebugCallback=X.Pf;X.ce=function(a,b){a.C.ce(b)};X.stats=X.ce;X.de=function(a,b){a.C.de(b)};X.statsIncrementCounter=X.de;X.Lc=function(a){return a.C.Lc};X.dataUpdateCount=X.Lc;X.Af=function(a,b){a.C.Qd=b};X.interceptServerData=X.Af;X.Ef=function(a){new ih(a)};X.onPopupOpen=X.Ef;X.Nf=function(){};X.setAuthenticationServer=X.Nf;function Y(a,b){this.Ac=a;this.qa=b}Y.prototype.cancel=function(a){C("Wilddog.onDisconnect().cancel",0,1,arguments.length);D("Wilddog.onDisconnect().cancel",1,a,!0);var b=new fc;this.Ac.cd(this.qa,gc(b,a));return b.ra};Y.prototype.cancel=Y.prototype.cancel;Y.prototype.cancel=Y.prototype.cancel;
Y.prototype.remove=function(a){C("Wilddog.onDisconnect().remove",0,1,arguments.length);K("Wilddog.onDisconnect().remove",this.qa);D("Wilddog.onDisconnect().remove",1,a,!0);var b=new fc;Ug(this.Ac,this.qa,null,gc(b,a));return b.ra};Y.prototype.remove=Y.prototype.remove;Y.prototype.remove=Y.prototype.remove;
Y.prototype.set=function(a,b){C("Wilddog.onDisconnect().set",1,2,arguments.length);K("Wilddog.onDisconnect().set",this.qa);Fc("Wilddog.onDisconnect().set",a,this.qa,!1);D("Wilddog.onDisconnect().set",2,b,!0);var c=new fc;Ug(this.Ac,this.qa,a,gc(c,b));return c.ra};Y.prototype.set=Y.prototype.set;Y.prototype.set=Y.prototype.set;
Y.prototype.hb=function(a,b,c){C("Wilddog.onDisconnect().setWithPriority",2,3,arguments.length);K("Wilddog.onDisconnect().setWithPriority",this.qa);Fc("Wilddog.onDisconnect().setWithPriority",a,this.qa,!1);Jc("Wilddog.onDisconnect().setWithPriority",2,b);D("Wilddog.onDisconnect().setWithPriority",3,c,!0);var d=new fc;Vg(this.Ac,this.qa,a,b,gc(d,c));return d.ra};Y.prototype.setWithPriority=Y.prototype.hb;Y.prototype.setWithPriority=Y.prototype.hb;
Y.prototype.update=function(a,b){C("Wilddog.onDisconnect().update",1,2,arguments.length);K("Wilddog.onDisconnect().update",this.qa);if(da(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;y("Passing an Array to Wilddog.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ic("Wilddog.onDisconnect().update",a,this.qa);D("Wilddog.onDisconnect().update",2,b,!0);c=new fc;
Wg(this.Ac,this.qa,a,gc(c,b));return c.ra};Y.prototype.update=Y.prototype.update;Y.prototype.update=Y.prototype.update;function zf(a){this.g=a}h=zf.prototype;h.J=function(a,b,c,d,e){x(a.lc(this.g),"A node must be indexed if only a child is updated");d=a.O(b);if(d.aa(c))return a;null!=e&&(c.f()?a.Ha(b)?kh(e,new V("child_removed",d,b)):x(a.P(),"A child remove without an old child only makes sense on a leaf node"):d.f()?kh(e,new V("child_added",c,b)):kh(e,new V("child_changed",c,b,d)));return a.P()&&c.f()?a:a.S(b,c).ib(this.g)};
h.ua=function(a,b,c){null!=c&&(a.P()||a.V(O,function(a,e){b.Ha(a)||kh(c,new V("child_removed",e,a))}),b.P()||b.V(O,function(b,e){if(a.Ha(b)){var d=a.O(b);d.aa(e)||kh(c,new V("child_changed",e,b,d))}else kh(c,new V("child_added",e,b))}));return b.ib(this.g)};h.da=function(a,b){return a.f()?N:a.da(b)};h.Ga=function(){return!1};h.Gb=function(){return this};function Bf(a){this.Od=new zf(a.g);this.g=a.g;var b;a.la?(b=lh(a),b=a.g.qc(mh(a),b)):b=Hd;this.Cc=b;a.na?(b=nh(a),a=a.g.qc(oh(a),b)):a=a.g.rc();this.ic=a}h=Bf.prototype;h.matches=function(a){return 0>=this.g.compare(this.Cc,a)&&0>=this.g.compare(a,this.ic)};h.J=function(a,b,c,d,e){this.matches(new L(b,c))||(c=N);return this.Od.J(a,b,c,d,e)};h.ua=function(a,b,c){b.P()&&(b=N);var d=b.ib(this.g),d=d.da(N),e=this;b.V(O,function(a,b){e.matches(new L(a,b))||(d=d.S(a,N))});return this.Od.ua(a,d,c)};
h.da=function(a){return a};h.Ga=function(){return!0};h.Gb=function(){return this.Od};function Af(a){this.sa=new Bf(a);this.g=a.g;x(a.ka,"Only valid if limit has been set");this.ba=a.ba;this.vb=!ph(a)}h=Af.prototype;h.J=function(a,b,c,d,e){this.sa.matches(new L(b,c))||(c=N);return a.O(b).aa(c)?a:a.qb()<this.ba?this.sa.Gb().J(a,b,c,d,e):qh(this,a,b,c,d,e)};
h.ua=function(a,b,c){var d;if(b.P()||b.f())d=N.ib(this.g);else if(2*this.ba<b.qb()&&b.lc(this.g)){d=N.ib(this.g);b=this.vb?b.Lb(this.sa.ic,this.g):b.Jb(this.sa.Cc,this.g);for(var e=0;0<b.Oa.length&&e<this.ba;){var f=P(b),g;if(g=this.vb?0>=this.g.compare(this.sa.Cc,f):0>=this.g.compare(f,this.sa.ic))d=d.S(f.name,f.node),e++;else break}}else{d=b.ib(this.g);d=d.da(N);var k,l,m;if(this.vb){b=d.we(this.g);k=this.sa.ic;l=this.sa.Cc;var J=Uc(this.g);m=function(a,b){return J(b,a)}}else b=d.Ib(this.g),k=this.sa.Cc,
l=this.sa.ic,m=Uc(this.g);for(var e=0,w=!1;0<b.Oa.length;)f=P(b),!w&&0>=m(k,f)&&(w=!0),(g=w&&e<this.ba&&0>=m(f,l))?e++:d=d.S(f.name,N)}return this.sa.Gb().ua(a,d,c)};h.da=function(a){return a};h.Ga=function(){return!0};h.Gb=function(){return this.sa.Gb()};
function qh(a,b,c,d,e,f){var g;if(a.vb){var k=Uc(a.g);g=function(a,b){return k(b,a)}}else g=Uc(a.g);x(b.qb()==a.ba,"");var l=new L(c,d),m=a.vb?Fd(b,a.g):Gd(b,a.g),J=a.sa.matches(l);if(b.Ha(c)){var w=b.O(c),m=e.Ld(a.g,m,a.vb);null!=m&&m.name==c&&(m=e.Ld(a.g,m,a.vb));e=null==m?1:g(m,l);if(J&&!d.f()&&0<=e)return null!=f&&kh(f,new V("child_changed",d,c,w)),b.S(c,d);null!=f&&kh(f,new V("child_removed",w,c));b=b.S(c,N);return null!=m&&a.sa.matches(m)?(null!=f&&kh(f,new V("child_added",m.node,m.name)),b.S(m.name,
m.node)):b}return d.f()?b:J&&0<=g(m,l)?(null!=f&&(kh(f,new V("child_removed",m.node,m.name)),kh(f,new V("child_added",d,c))),b.S(c,d).S(m.name,N)):b};function qf(){this.cb={}}
function kh(a,b){var c=b.type,d=b.Ua;x("child_added"==c||"child_changed"==c||"child_removed"==c,"Only child changes supported for tracking");x(".priority"!==d,"Only non-priority child changes can be tracked.");var e=B(a.cb,d);if(e){var f=e.type;if("child_added"==c&&"child_removed"==f)a.cb[d]=new V("child_changed",b.Ja,d,e.Ja);else if("child_removed"==c&&"child_added"==f)delete a.cb[d];else if("child_removed"==c&&"child_changed"==f)a.cb[d]=new V("child_removed",e.Vd,d);else if("child_changed"==c&&
"child_added"==f)a.cb[d]=new V("child_added",b.Ja,d);else if("child_changed"==c&&"child_changed"==f)a.cb[d]=new V("child_changed",b.Ja,d,e.Vd);else throw cb("Illegal combination of changes: "+b+" occurred after "+e);}else a.cb[d]=b};function rh(){this.Cb=this.na=this.wb=this.la=this.ka=!1;this.ba=0;this.yb="";this.Qb=null;this.ob="";this.Nb=null;this.mb="";this.g=O}var sh=new rh;function ph(a){return""===a.yb?a.la:"l"===a.yb}function mh(a){x(a.la,"Only valid if start has been set");return a.Qb}function lh(a){x(a.la,"Only valid if start has been set");return a.wb?a.ob:"[MIN_NAME]"}function oh(a){x(a.na,"Only valid if end has been set");return a.Nb}
function nh(a){x(a.na,"Only valid if end has been set");return a.Cb?a.mb:"[MAX_NAME]"}function th(a){var b=new rh;b.ka=a.ka;b.ba=a.ba;b.la=a.la;b.Qb=a.Qb;b.wb=a.wb;b.ob=a.ob;b.na=a.na;b.Nb=a.Nb;b.Cb=a.Cb;b.mb=a.mb;b.g=a.g;return b}h=rh.prototype;h.Ud=function(a){var b=th(this);b.ka=!0;b.ba=a;b.yb="";return b};h.Xc=function(a){var b=th(this);b.ka=!0;b.ba=a;b.yb="l";return b};h.Yc=function(a){var b=th(this);b.ka=!0;b.ba=a;b.yb="r";return b};
h.Bc=function(a,b){var c=th(this);c.la=!0;p(a)||(a=null);c.Qb=a;null!=b?(c.wb=!0,c.ob=b):(c.wb=!1,c.ob="");return c};h.hc=function(a,b){var c=th(this);c.na=!0;p(a)||(a=null);c.Nb=a;p(b)?(c.Cb=!0,c.mb=b):(c.ag=!1,c.mb="");return c};function uh(a,b){var c=th(a);c.g=b;return c}function ce(a){var b={};a.la&&(b.sp=a.Qb,a.wb&&(b.sn=a.ob));a.na&&(b.ep=a.Nb,a.Cb&&(b.en=a.mb));if(a.ka){b.l=a.ba;var c=a.yb;""===c&&(c=ph(a)?"l":"r");b.vf=c}a.g!==O&&(b.i=a.g.toString());return b}
function S(a){return!(a.la||a.na||a.ka)}function oe(a){var b={};if(S(a)&&a.g==O)return b;var c;a.g===O?c="$priority":a.g===cd?c="$value":a.g===$c?c="$key":(x(a.g instanceof Vc,"Unrecognized index type!"),c=a.g.toString());b.orderBy=u(c);a.la&&(b.startAt=u(a.Qb),a.wb&&(b.startAt+=","+u(a.ob)));a.na&&(b.endAt=u(a.Nb),a.Cb&&(b.endAt+=","+u(a.mb)));a.ka&&(ph(a)?b.limitToFirst=a.ba:b.limitToLast=a.ba);return b}h.toString=function(){return u(ce(this))};function Z(a,b,c,d){this.C=a;this.path=b;this.A=c;this.Vb=d}
function vh(a){var b=null,c=null;a.la&&(b=mh(a));a.na&&(c=oh(a));if(a.g===$c){if(a.la){if("[MIN_NAME]"!=lh(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==typeof b)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}if(a.na){if("[MAX_NAME]"!=nh(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==
typeof c)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}}else if(a.g===O){if(null!=b&&!Ec(b)||null!=c&&!Ec(c))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).");}else if(x(a.g instanceof Vc||a.g===cd,"unknown index type."),null!=b&&"object"===typeof b||null!=c&&"object"===typeof c)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.");
}function wh(a){if(a.la&&a.na&&a.ka&&(!a.ka||""===a.yb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.");}function xh(a,b){if(!0===a.Vb)throw Error(b+": You can't combine multiple orderBy calls.");}Z.prototype.Xb=function(a){C("Query.ref",0,1,arguments.length);a&&Nc("Query.ref",a);return new W(this.app,this.C,a?this.path.o(a):this.path)};Z.prototype.ref=Z.prototype.Xb;
Z.prototype.rb=function(a,b,c,d){C("Query.on",2,4,arguments.length);Kc("Query.on",a,!1);D("Query.on",2,b,!1);var e=yh("Query.on",c,d);if("value"===a)Xg(this.C,this,new ef(b,e.cancel||null,e.context||null));else{var f={};f[a]=b;Xg(this.C,this,new ff(f,e.cancel,e.context))}return b};Z.prototype.on=Z.prototype.rb;
Z.prototype.Sb=function(a,b,c){C("Query.off",0,3,arguments.length);Kc("Query.off",a,!0);D("Query.off",2,b,!0);uc("Query.off",3,c);var d=null,e=null;"value"===a?d=new ef(b||null,null,c||null):a&&(b&&(e={},e[a]=b),d=new ff(e,null,c||null));e=this.C;d=".info"===G(this.path)?e.Vc.gb(this,d):e.R.gb(this,d);Ig(e.ea,this.path,d)};Z.prototype.off=Z.prototype.Sb;
Z.prototype.Ge=function(a,b){function c(k){f&&(f=!1,e.Sb(a,c),b&&b.call(d.context,k),g.resolve(k))}C("Query.once",1,4,arguments.length);Kc("Query.once",a,!1);D("Query.once",2,b,!0);var d=yh("Query.once",arguments[2],arguments[3]),e=this,f=!0,g=new fc;hc(g.ra);this.rb(a,c,function(b){e.Sb(a,c);d.cancel&&d.cancel.call(d.context,b);g.reject(b)});return g.ra};Z.prototype.once=Z.prototype.Ge;Z.prototype.once=Z.prototype.Ge;
Z.prototype.Ud=function(a){y("Query.limit() being deprecated. Please use Query.limitToFirst() or Query.limitToLast() instead.");C("Query.limit",1,1,arguments.length);if(!ea(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limit: First argument must be a positive integer.");if(this.A.ka)throw Error("Query.limit: Limit was already set (by another call to limit, limitToFirst, orlimitToLast.");var b=this.A.Ud(a);wh(b);return new Z(this.C,this.path,b,this.Vb)};Z.prototype.limit=Z.prototype.Ud;
Z.prototype.Xc=function(a){C("Query.limitToFirst",1,1,arguments.length);if(!ea(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.A.ka)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Z(this.C,this.path,this.A.Xc(a),this.Vb)};Z.prototype.limitToFirst=Z.prototype.Xc;Z.prototype.limitToFirst=Z.prototype.Xc;
Z.prototype.Yc=function(a){C("Query.limitToLast",1,1,arguments.length);if(!ea(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.A.ka)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Z(this.C,this.path,this.A.Yc(a),this.Vb)};Z.prototype.limitToLast=Z.prototype.Yc;Z.prototype.limitToLast=Z.prototype.Yc;
Z.prototype.He=function(a){C("Query.orderByChild",1,1,arguments.length);if("$key"===a)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===a)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===a)throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Lc("Query.orderByChild",1,a,!1);xh(this,"Query.orderByChild");var b=uh(this.A,new Vc(a));vh(b);return new Z(this.C,
this.path,b,!0)};Z.prototype.orderByChild=Z.prototype.He;Z.prototype.orderByChild=Z.prototype.He;Z.prototype.Ie=function(){C("Query.orderByKey",0,0,arguments.length);xh(this,"Query.orderByKey");var a=uh(this.A,$c);vh(a);return new Z(this.C,this.path,a,!0)};Z.prototype.orderByKey=Z.prototype.Ie;Z.prototype.orderByKey=Z.prototype.Ie;Z.prototype.Je=function(){C("Query.orderByPriority",0,0,arguments.length);xh(this,"Query.orderByPriority");var a=uh(this.A,O);vh(a);return new Z(this.C,this.path,a,!0)};
Z.prototype.orderByPriority=Z.prototype.Je;Z.prototype.orderByPriority=Z.prototype.Je;Z.prototype.Ke=function(){C("Query.orderByValue",0,0,arguments.length);xh(this,"Query.orderByValue");var a=uh(this.A,cd);vh(a);return new Z(this.C,this.path,a,!0)};Z.prototype.orderByValue=Z.prototype.Ke;Z.prototype.orderByValue=Z.prototype.Ke;
Z.prototype.Bc=function(a,b){C("Query.startAt",0,2,arguments.length);Fc("Query.startAt",a,this.path,!0);Lc("Query.startAt",2,b,!0);var c=this.A.Bc(a,b);wh(c);vh(c);if(this.A.la)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");p(a)||(b=a=null);return new Z(this.C,this.path,c,this.Vb)};Z.prototype.startAt=Z.prototype.Bc;Z.prototype.startAt=Z.prototype.Bc;
Z.prototype.hc=function(a,b){C("Query.endAt",0,2,arguments.length);Fc("Query.endAt",a,this.path,!0);Lc("Query.endAt",2,b,!0);var c=this.A.hc(a,b);wh(c);vh(c);if(this.A.na)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Z(this.C,this.path,c,this.Vb)};Z.prototype.endAt=Z.prototype.hc;Z.prototype.endAt=Z.prototype.hc;
Z.prototype.pe=function(a,b){C("Query.equalTo",1,2,arguments.length);Fc("Query.equalTo",a,this.path,!1);Lc("Query.equalTo",2,b,!0);if(this.A.la)throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");if(this.A.na)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.Bc(a,b).hc(a,b)};Z.prototype.equalTo=Z.prototype.pe;Z.prototype.equalTo=Z.prototype.pe;
Z.prototype.toString=function(){C("Query.toString",0,0,arguments.length);for(var a=this.path,b="",c=a.$;c<a.w.length;c++)""!==a.w[c]&&(b+="/"+encodeURIComponent(String(a.w[c])));return this.C.toString()+(b||"/")};Z.prototype.toString=Z.prototype.toString;function ae(a){a=qb(ce(a.A));return"{}"===a?"default":a}
function yh(a,b,c){var d={cancel:null,context:null};if(b&&c)d.cancel=b,D(a,3,d.cancel,!0),d.context=c,uc(a,4,d.context);else if(b)if("object"===typeof b&&null!==b)d.context=b;else if("function"===typeof b)d.cancel=b;else throw Error(tc(a,3,!0)+" must either be a cancel callback or a context object.");return d};function zh(a,b){this.committed=a;this.snapshot=b};var Ah=function(){var a=0,b=[];return function(c){var d=c===a;a=c;for(var e=Array(8),f=7;0<=f;f--)e[f]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(c%64),c=Math.floor(c/64);x(0===c,"Cannot push at time == 0");c=e.join("");if(d){for(f=11;0<=f&&63===b[f];f--)b[f]=0;b[f]++}else for(f=0;12>f;f++)b[f]=Math.floor(64*Math.random());for(f=0;12>f;f++)c+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(b[f]);x(20===c.length,"nextPushId: Length should be 20.");
return c}}();function W(a,b,c){var d,e,f;this.app=a;if(!b&&!c){b=a.options.syncURL;if(!b)throw Error("Could not find 'syncURL' in options.");var g=b,k=e=a=d="";c=!0;f="https";if(q(g)){var l=g.indexOf("//");0<=l&&(f=g.substring(0,l-1),g=g.substring(l+2));l=g.indexOf("/");-1===l&&(l=g.length);d=g.substring(0,l);k="";g=g.substring(l).split("/");for(l=0;l<g.length;l++)if(0<g[l].length){var m=g[l];try{m=decodeURIComponent(m.replace(/\+/g," "))}catch(J){}k+="/"+m}g=d.split(".");3===g.length?(a=g[1],e=g[0].toLowerCase()):
2===g.length&&(a=g[0]);l=d.indexOf(":");0<=l&&(c="https"===f||"wss"===f)}f=k;"wilddog"===a&&mb(d+" is no longer supported. Please use <YOUR WILDDOG>.wilddogio.com instead");e||mb("Cannot parse Wilddog url. Please use https://<YOUR WILDDOG>.wilddogio.com");c||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&y("Insecure Wilddog access from a secure page. Please use https.");f&&((a=f)&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),q(a)&&
0!==a.length&&!Cc.test(a)||mb("App syncURL was an invalid path: "+b+'. Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"'));b=new Yg(d,c,e);a=new E(f);c=hh.Hb();e=this.app;d=b.toString();c.Ra[e.name]||(c.Ra[e.name]={});f=B(c.Ra[e.name],d);f||(f=new Lg(e,b,c.Vf),c.Ra[e.name][d]=f);b=f;c=a}Z.call(this,b,c,sh,!1)}t(W,Z);W.prototype.name=function(){y("Wilddog.name() being deprecated. Please use Wilddog.key() instead.");C("Wilddog.name",0,0,arguments.length);return this.key()};
W.prototype.name=W.prototype.name;W.prototype.key=function(){C("Wilddog.key",0,0,arguments.length);return this.path.f()?null:wc(this.path)};W.prototype.key=W.prototype.key;W.prototype.o=function(a){C("Wilddog.child",1,1,arguments.length);ea(a)?a=String(a):a instanceof E||(null===G(this.path)?Nc("Wilddog.child",a):Mc("Wilddog.child",a));return new W(this.app,this.C,this.path.o(a))};W.prototype.child=W.prototype.o;
W.prototype.parent=function(){C("Wilddog.parent",0,0,arguments.length);var a=this.path.parent();return null===a?null:new W(this.app,this.C,a)};W.prototype.parent=W.prototype.parent;W.prototype.root=function(){C("Wilddog.ref",0,0,arguments.length);for(var a=this;null!==a.parent();)a=a.parent();return a};W.prototype.root=W.prototype.root;
W.prototype.set=function(a,b){C("Wilddog.set",1,2,arguments.length);K("Wilddog.set",this.path);Fc("Wilddog.set",a,this.path,!1);D("Wilddog.set",2,b,!0);var c=new fc;this.C.hb(this.path,a,null,gc(c,b));return c.ra};W.prototype.set=W.prototype.set;
W.prototype.update=function(a,b){C("Wilddog.update",1,2,arguments.length);K("Wilddog.update",this.path);if(da(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;y("Passing an Array to Wilddog.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ic("Wilddog.update",a,this.path);D("Wilddog.update",2,b,!0);c=new fc;this.C.update(this.path,a,gc(c,b));return c.ra};W.prototype.update=W.prototype.update;
W.prototype.hb=function(a,b,c){C("Wilddog.setWithPriority",2,3,arguments.length);K("Wilddog.setWithPriority",this.path);Fc("Wilddog.setWithPriority",a,this.path,!1);Jc("Wilddog.setWithPriority",2,b);D("Wilddog.setWithPriority",3,c,!0);if(".length"===this.key()||".keys"===this.key())throw"Wilddog.setWithPriority failed: "+this.key()+" is a read-only object.";var d=new fc;this.C.hb(this.path,a,b,gc(d,c));return d.ra};W.prototype.setWithPriority=W.prototype.hb;
W.prototype.remove=function(a){C("Wilddog.remove",0,1,arguments.length);K("Wilddog.remove",this.path);D("Wilddog.remove",1,a,!0);return this.set(null,a)};W.prototype.remove=W.prototype.remove;
W.prototype.transaction=function(a,b,c){C("Wilddog.transaction",1,3,arguments.length);K("Wilddog.transaction",this.path);D("Wilddog.transaction",1,a,!1);D("Wilddog.transaction",2,b,!0);if(p(c)&&"boolean"!=typeof c)throw Error(tc("Wilddog.transaction",3,!0)+"must be a boolean.");if(".length"===this.key()||".keys"===this.key())throw"Wilddog.transaction failed: "+this.key()+" is a read-only object.";"undefined"===typeof c&&(c=!0);var d=new fc;fa(b)&&hc(d.ra);Zg(this.C,this.path,a,function(a,c,g){a?d.reject(a):
d.resolve(new zh(c,g));fa(b)&&b(a,c,g)},c);return d.ra};W.prototype.transaction=W.prototype.transaction;W.prototype.Of=function(a,b){C("Wilddog.setPriority",1,2,arguments.length);K("Wilddog.setPriority",this.path);Jc("Wilddog.setPriority",1,a);D("Wilddog.setPriority",2,b,!0);var c=new fc;this.C.hb(this.path.o(".priority"),a,null,gc(c,b));return c.ra};W.prototype.setPriority=W.prototype.Of;
W.prototype.push=function(a,b){C("Wilddog.push",0,2,arguments.length);K("Wilddog.push",this.path);Fc("Wilddog.push",a,this.path,!0);D("Wilddog.push",2,b,!0);var c=Og(this.C),d=Ah(c),c=this.o(d);if(null!=a){var e=this,f=c.set(a,b).then(function(){return e.o(d)});c.then=r(f.then,f);c["catch"]=r(f.then,f,void 0);fa(b)&&hc(f)}return c};W.prototype.push=W.prototype.push;W.prototype.onDisconnect=function(){K("Wilddog.onDisconnect",this.path);return new Y(this.C,this.path)};W.prototype.onDisconnect=W.prototype.onDisconnect;
function Bh(){C("Wilddog.goOffline",0,0,arguments.length);hh.Hb().jc(this.app)}ja("module$exports$wd$sync$Sync.goOffline",Bh);function Ch(){C("Wilddog.goOnline",0,0,arguments.length);hh.Hb().resume(this.app)}ja("module$exports$wd$sync$Sync.goOnline",Ch);var Dh={TIMESTAMP:{".sv":"timestamp"}};ja("module$exports$wd$sync$Sync.ServerValue",Dh);ja("module$exports$wd$sync$Sync.INTERNAL",X);ja("module$exports$wd$sync$Sync.Context",hh);W.prototype.xf=Bh;W.prototype.goOffline=W.prototype.xf;
W.prototype.yf=Ch;W.prototype.goOnline=W.prototype.yf;W.prototype.oe=function(a,b){x(!b||!0===a||!1===a,"Can't turn on custom loggers persistently.");!0===a?("undefined"!==typeof console&&("function"===typeof console.log?hb=r(console.log,console):"object"===typeof console.log&&(hb=function(a){console.log(a)})),b&&jb.set("logging_enabled",!0)):a?hb=a:(hb=null,jb.remove("logging_enabled"))};W.prototype.enableLogging=W.prototype.oe;W.prototype.af=Dh;W.prototype.ServerValue=W.prototype.af;
W.prototype.$e=X;W.prototype.INTERNAL=W.prototype.$e;sc&&sc.If&&sc.If(Z);Pc.Oe("sync",function(a){return new W(a)});if("WEB"==CLIENT_TYPE)"object"==typeof module&&module.exports&&(module.exports=Pc),"function"==typeof define&&define.amd&&define("wilddog",[],function(){return Pc}),window?window.wilddog=Pc:WorkerGlobalScope&&self&&(self.wilddog=Pc);else if("NODE"==CLIENT_TYPE||"WX"==CLIENT_TYPE||"RN"==CLIENT_TYPE)module.exports=Pc;
};ns.wrapper(ns.goog,ns.wd)})({goog:{},wd:{}})
